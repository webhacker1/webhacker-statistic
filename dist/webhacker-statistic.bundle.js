(function(){"use strict";try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode('.statistics-widget-root{--statistics-panel-background: var(--background-color, #ffffff);--statistics-panel-border: var(--border-color, #dbe7f5);--statistics-text-primary: var(--text-color, #1d3048);--statistics-text-secondary: var(--muted-text-color, #56708f)}.period-selector{display:flex;align-items:center;gap:8px;flex-wrap:wrap}.period-selector .chip{border:1px solid color-mix(in srgb,var(--statistics-panel-border, var(--border-color, #dbe7f5)) 80%,#9fc2ea 20%);border-radius:999px;background:color-mix(in srgb,var(--statistics-panel-background, var(--background-color, #ffffff)) 92%,#f6faff 8%);color:var(--statistics-text-secondary, var(--muted-text-color, #35506f));padding:7px 14px;cursor:pointer;transition:all .2s ease;box-shadow:0 2px 6px #1e36560f}.period-selector .chip:hover{transform:translateY(-1px);box-shadow:0 5px 12px #1e36561f}.period-selector .chip.active{border-color:#2d93df;color:#2d93df;background:color-mix(in srgb,var(--statistics-panel-background, var(--background-color, #ffffff)) 88%,#edf7ff 12%)}.grid{display:grid;grid-template-columns:repeat(2,minmax(280px,1fr));gap:16px}.card{position:relative;overflow:hidden;background:var(--statistics-panel-background, var(--background-color, #ffffff));border:1px solid var(--statistics-panel-border, var(--border-color, #dbe7f5));border-radius:16px;padding:14px;box-shadow:0 10px 28px #152a4614;transition:transform .18s ease,box-shadow .18s ease}.card:before{content:"";position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none;background:radial-gradient(circle at 10% 0%,rgba(45,156,219,.08),transparent 46%)}.card:hover{transform:translateY(-2px);box-shadow:0 16px 36px #152a461f}.card h3{margin:0 0 12px;color:var(--statistics-text-primary, var(--text-color, #1d3048));font-size:16px;font-weight:700;position:relative;z-index:1}.wide{grid-column:span 2}.canvas-wrap{height:320px;position:relative;z-index:1}canvas{display:block;width:100%;height:100%}.statistics-tooltip{position:absolute;z-index:50;min-width:146px;max-width:260px;padding:8px 10px;border-radius:12px;border:1px solid color-mix(in srgb,var(--statistics-panel-border, var(--border-color, #dbe7f5)) 78%,#2d9cdb 22%);background:color-mix(in srgb,var(--statistics-panel-background, var(--background-color, #ffffff)) 92%,#ffffff 8%);box-shadow:0 16px 36px #152a462e;-webkit-backdrop-filter:blur(7px);backdrop-filter:blur(7px);transform:translateY(-100%);pointer-events:none;transition:opacity .12s ease;color:var(--statistics-text-primary, var(--text-color, #1d3048))}.statistics-tooltip__title{margin:0 0 6px;font-size:12px;line-height:1.2;font-weight:700}.statistics-tooltip__row{display:flex;align-items:center;justify-content:space-between;gap:10px;margin:3px 0;font-size:12px;color:var(--statistics-text-secondary, var(--muted-text-color, #56708f))}.statistics-tooltip__row span{display:inline-flex;align-items:center;gap:6px}.statistics-tooltip__dot{width:8px;height:8px;border-radius:999px;background:var(--statistics-tooltip-dot-color, #2d9cdb);box-shadow:0 0 0 3px #2d9cdb26}.statistics-tooltip__row strong{color:var(--statistics-text-primary, var(--text-color, #1d3048));font-weight:700}.statistics-legend{position:relative;z-index:1;margin-top:12px;display:flex;align-items:center;gap:9px;flex-wrap:wrap}.statistics-legend__item{border:1px solid rgba(45,156,219,.24);background:color-mix(in srgb,var(--statistics-panel-background, var(--background-color, #ffffff)) 92%,#ffffff 8%);border-radius:999px;padding:6px 11px;color:var(--statistics-text-primary, var(--text-color, #1d3048));display:inline-flex;align-items:center;gap:7px;cursor:pointer;font-size:12px;line-height:1;box-shadow:0 6px 14px #152a4614;transition:transform .16s ease,background-color .16s ease,opacity .16s ease,box-shadow .16s ease}.statistics-legend__item:hover{transform:translateY(-1px);background:color-mix(in srgb,var(--statistics-panel-background, var(--background-color, #ffffff)) 86%,#ffffff 14%);box-shadow:0 9px 18px #152a461f}.statistics-legend__item--inactive{opacity:.54}.statistics-legend__item--inactive span{text-decoration:line-through}.statistics-legend__dot{width:9px;height:9px;border-radius:999px;background:var(--statistics-legend-dot-color, #2d9cdb);box-shadow:0 0 0 3px #2d9cdb1f}@media(max-width:900px){.grid{grid-template-columns:1fr}.wide{grid-column:auto}.canvas-wrap{height:280px}.statistics-legend__item{font-size:11px;padding:6px 10px}}@media(max-width:560px){body{padding:12px}.card{padding:12px;border-radius:14px}.card h3{font-size:15px}.canvas-wrap{height:240px}}')),document.head.appendChild(t)}}catch(r){console.error("vite-plugin-css-injected-by-js",r)}})();
var WebHackerStatistics=(function(C){"use strict";const S={panelBackground:"--statistics-panel-background",panelBorder:"--statistics-panel-border",textPrimary:"--statistics-text-primary",textSecondary:"--statistics-text-secondary",lineJoin:"--statistics-line-join",lineLeave:"--statistics-line-leave",success:"--statistics-success",danger:"--statistics-danger",grid:"--statistics-grid",doughnutHoleBackground:"--statistics-doughnut-hole-background"},k={panelBackground:"#ffffff",panelBorder:"#dbe7f5",textPrimary:"#1d3048",textSecondary:"#667e9a",lineJoin:"#28a745",lineLeave:"#e74c3c",success:"#28a745",danger:"#e74c3c",grid:"#e3ecf8"};function W(e,n,r){return getComputedStyle(r).getPropertyValue(e).trim()||n}function N(e,n,r){for(let t=0;t<e.length;t+=1){const i=e[t],o=getComputedStyle(r).getPropertyValue(i).trim();if(o)return o}return n}function $(e,n=.2){if(e.startsWith("#")&&e.length===7){const r=Number.parseInt(e.slice(1,3),16),t=Number.parseInt(e.slice(3,5),16),i=Number.parseInt(e.slice(5,7),16);return`rgba(${r}, ${t}, ${i}, ${n})`}return e.startsWith("rgb(")?e.replace("rgb(","rgba(").replace(")",`, ${n})`):e}function X(e){const n=e||document.body||document.documentElement,r=N([S.panelBackground,"--background-color","--surface-color"],k.panelBackground,n);return{panelBackground:r,panelBorder:N([S.panelBorder,"--border-color"],k.panelBorder,n),textPrimary:N([S.textPrimary,"--text-color","--color-text"],k.textPrimary,n),textSecondary:N([S.textSecondary,"--muted-text-color","--color-text-secondary"],k.textSecondary,n),lineJoin:W(S.lineJoin,k.lineJoin,n),lineLeave:W(S.lineLeave,k.lineLeave,n),success:W(S.success,k.success,n),danger:W(S.danger,k.danger,n),grid:W(S.grid,k.grid,n),doughnutHoleBackground:N([S.doughnutHoleBackground,"--background-color","--surface-color"],r,n),palette:["#4caf50","#2196f3","#ff9800","#9c27b0","#ffc107","#00bcd4","#6a5acd","#ff5722","#2ecc71","#e91e63"]}}const D=new Map;function H({animationKey:e,durationMs:n=700,onUpdate:r}){const t=D.get(e);typeof t=="number"&&(cancelAnimationFrame(t),D.delete(e));const i=performance.now(),o=s=>{const a=s-i,m=Math.min(a/n,1),y=1-Math.pow(1-m,3);if(r(y),m<1){const g=requestAnimationFrame(o);D.set(e,g);return}D.delete(e)},l=requestAnimationFrame(o);D.set(e,l)}function F(e,n=280){const r=e.getContext("2d");if(!r)return null;const t=window.devicePixelRatio||1,i=Math.max(280,Math.floor(e.clientWidth)),o=Math.floor(e.clientHeight),l=Math.min(460,Math.max(n,Number.isFinite(o)?o:n));return e.width=Math.floor(i*t),e.height=Math.floor(l*t),r.setTransform(t,0,0,t,0,0),{width:i,height:l,context:r}}function U(e,n,r,t){e.clearRect(0,0,n,r),e.fillStyle=t,e.fillRect(0,0,n,r)}const te=new WeakMap;function ve(e){const n=te.get(e);if(n)return n;const r=e.parentElement;if(!r)return null;getComputedStyle(r).position==="static"&&(r.style.position="relative");const t=document.createElement("div");return t.className="statistics-tooltip",t.style.opacity="0",r.appendChild(t),te.set(e,t),t}function q(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/'/g,"&#39;")}function J(e,n){const r=n.map(t=>`
                <div class="statistics-tooltip__row">
                    <span>${t.accentColor?`<i class="statistics-tooltip__dot" style="--statistics-tooltip-dot-color: ${q(t.accentColor)}"></i>`:""}${q(t.label)}</span>
                    <strong>${q(t.value)}</strong>
                </div>
            `).join("");return`
        <div class="statistics-tooltip__title">${q(e)}</div>
        ${r}
    `}function O(e,n,r,t){const i=ve(e);if(!i)return;i.innerHTML=t;const o=e.parentElement,l=o?o.clientWidth:0,s=l?Math.max(10,Math.min(n,l-10)):n;i.style.left=`${s}px`,i.style.top=`${Math.max(10,r)}px`,i.style.opacity="1"}function T(e){const n=te.get(e);n&&(n.style.opacity="0")}const j=new WeakMap;function K(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/'/g,"&#39;")}function Ie(e){const n=e.parentElement;return n?n.closest(".card")||n:null}function Le(e){const n=j.get(e);if(n)return n.legendElement;const r=Ie(e);if(!r)return null;const t=document.createElement("div");t.className="statistics-legend",r.appendChild(t);const i={legendElement:t,onToggle:()=>{}};return t.addEventListener("click",o=>{var s;const l=(s=o.target)==null?void 0:s.closest(".statistics-legend__item");l&&i.onToggle(l.dataset.identifier||"")}),j.set(e,i),t}function ne(e,n,r){const t=Le(e);if(!t)return;const i=j.get(e);i&&(i.onToggle=r,t.innerHTML=n.map(o=>`
                <button
                    type="button"
                    class="statistics-legend__item${o.isActive?"":" statistics-legend__item--inactive"}"
                    data-identifier="${K(o.identifier)}"
                    title="${K(o.label)}"
                >
                    <i class="statistics-legend__dot" style="--statistics-legend-dot-color: ${K(o.color)}"></i>
                    <span>${K(o.label)}</span>
                </button>
            `).join(""))}function re(e){const n=j.get(e);n&&(n.legendElement.innerHTML="")}const w=new WeakMap;function G(e){const n=w.get(e);if(!n)return;const r=F(e,300);if(!r)return;const{context:t,width:i,height:o}=r;U(t,i,o,n.theme.panelBackground);const l=40,s=16,a=16,m=38,y=i-l-s,g=o-a-m,M=n.series.filter(c=>c.visibility>.02),d=M.flatMap(c=>c.values),x=Math.max(...d,1),b=y/Math.max(n.labels.length-1,1);t.strokeStyle=n.theme.grid,t.lineWidth=1;for(let c=0;c<=4;c+=1){const p=a+g/4*c;t.beginPath(),t.moveTo(l,p),t.lineTo(i-s,p),t.stroke()}const f=new Map;if(M.forEach(c=>{const p=c.values.map((h,I)=>{const B=l+b*I,V=Math.max(0,h*c.visibility)/x,z=a+g-V*g*n.progress;return{x:B,y:z}});t.beginPath(),p.forEach((h,I)=>{I===0?t.moveTo(h.x,h.y):t.lineTo(h.x,h.y)}),t.lineTo(l+b*(p.length-1),a+g),t.lineTo(l,a+g),t.closePath(),t.fillStyle=$(c.color,.15*c.visibility),t.fill(),t.beginPath(),p.forEach((h,I)=>{I===0?t.moveTo(h.x,h.y):t.lineTo(h.x,h.y)}),t.strokeStyle=c.color,t.lineWidth=2.6,t.globalAlpha=Math.max(.1,c.visibility),t.stroke(),t.globalAlpha=1,p.forEach((h,I)=>{const B=I===n.hoverIndex&&c.visibility>.5;t.beginPath(),t.arc(h.x,h.y,B?5.5:4,0,Math.PI*2),t.fillStyle=c.color,t.fill()}),f.set(c.identifier,p)}),n.hoverIndex!==null&&n.hoverIndex>=0&&n.hoverIndex<n.labels.length){const c=l+b*n.hoverIndex;t.strokeStyle=$(n.theme.textSecondary,.28),t.setLineDash([4,4]),t.beginPath(),t.moveTo(c,a),t.lineTo(c,a+g),t.stroke(),t.setLineDash([]),M.forEach(p=>{const h=f.get(p.identifier),I=h==null?void 0:h[n.hoverIndex??0];I&&(t.beginPath(),t.arc(I.x,I.y,8,0,Math.PI*2),t.strokeStyle=$(p.color,.45),t.lineWidth=1.5,t.stroke())})}t.fillStyle=n.theme.textSecondary,t.font='12px "Segoe UI", sans-serif',t.textAlign="center";const u=Math.max(2,Math.floor(y/62)),v=Math.max(1,Math.ceil(n.labels.length/u));n.labels.forEach((c,p)=>{const h=p===n.labels.length-1;(p%v===0||h)&&t.fillText(c,l+b*p,o-12)}),n.legendEnabled?ne(e,n.series.map(c=>({identifier:c.identifier,label:c.label,color:c.color,isActive:c.visibility>.5})),c=>{const p=w.get(e);if(!p)return;const h=p.series.find(V=>V.identifier===c);if(!h)return;const I=h.visibility,B=I>.5?0:1;H({animationKey:`line-toggle:${e.id}:${h.identifier}`,durationMs:360,onUpdate(V){const z=w.get(e);if(!z)return;const pe=z.series.find(Ne=>Ne.identifier===c);pe&&(pe.visibility=I+(B-I)*V,G(e),T(e))}})}):re(e)}function Te(e){const n=w.get(e);!n||n.initialized||(n.initialized=!0,e.addEventListener("mousemove",r=>{const t=w.get(e);if(!t||t.labels.length===0)return;const i=e.getBoundingClientRect(),o=40,a=(i.width-o-16)/Math.max(t.labels.length-1,1),m=r.clientX-i.left-o,y=Math.round(m/Math.max(a,1)),g=Math.max(0,Math.min(t.labels.length-1,y));t.hoverIndex=g,G(e);const M=t.series.filter(b=>b.visibility>.02);if(M.length===0){e.style.cursor="default",T(e);return}e.style.cursor="crosshair";const d=r.clientX-i.left,x=r.clientY-i.top;O(e,d+14,x-10,J(t.labels[g],M.map(b=>({label:b.label,value:Math.round((b.values[g]??0)*b.visibility),accentColor:b.color}))))}),e.addEventListener("mouseleave",()=>{const r=w.get(e);r&&(r.hoverIndex=null,G(e),e.style.cursor="default",T(e))}))}function Ce(e,n,r,t,i){const o=w.get(e),l={labels:n,series:r.map(s=>{const a=o==null?void 0:o.series.find(m=>m.identifier===s.identifier);return{...s,visibility:(a==null?void 0:a.visibility)??1}}),theme:t,progress:0,hoverIndex:(o==null?void 0:o.hoverIndex)??null,initialized:(o==null?void 0:o.initialized)??!1,legendEnabled:(i==null?void 0:i.enableLegend)!==!1};w.set(e,l),Te(e),H({animationKey:`line:${e.id}`,durationMs:850,onUpdate(s){const a=w.get(e);a&&(a.progress=s,G(e))}})}const A=new WeakMap;function le(e,n){return Math.max(0,(e.values[n]??0)*(e.visibility[n]??1))}function Q(e){const n=A.get(e);if(!n)return;const r=F(e,300);if(!r)return;const{context:t,width:i,height:o}=r;U(t,i,o,n.theme.panelBackground);const l=24,s=12,a=14,m=38,y=i-l-s,g=o-a-m;n.chartTop=a,n.chartBottom=a+g;const M=Math.max(...n.values.map((f,u)=>le(n,u)),1)||1,d=Math.min(64,y/Math.max(n.values.length*2,1)),x=n.values.length>1?(y-d*n.values.length)/(n.values.length-1):0;t.strokeStyle=n.theme.grid,t.lineWidth=1;for(let f=0;f<=5;f+=1){const u=a+g/5*f;t.beginPath(),t.moveTo(l,u),t.lineTo(i-s,u),t.stroke()}const b=[["#6a5acd","rgba(106,90,205,0.25)"],["#00bcd4","rgba(0,188,212,0.25)"],["#ff5722","rgba(255,87,34,0.25)"]];n.bars=[],n.values.forEach((f,u)=>{var V,z;const v=le(n,u),c=l+u*(d+x),p=v/M*g*n.progress,h=a+(g-p),I=n.hoverIndex===u,B=t.createLinearGradient(0,h,0,a+g);B.addColorStop(0,((V=b[u])==null?void 0:V[0])||"#2d9cdb"),B.addColorStop(1,((z=b[u])==null?void 0:z[1])||"rgba(45,156,219,0.22)"),t.fillStyle=B,t.beginPath(),t.moveTo(c+8,h),t.lineTo(c+d-8,h),t.quadraticCurveTo(c+d,h,c+d,h+8),t.lineTo(c+d,h+p),t.lineTo(c,h+p),t.lineTo(c,h+8),t.quadraticCurveTo(c,h,c+8,h),t.closePath(),t.fill(),I&&v>0&&(t.strokeStyle=$(n.theme.textPrimary,.22),t.lineWidth=2,t.stroke()),n.bars.push({index:u,x:c,y:h,width:d,height:p})}),t.fillStyle=n.theme.textSecondary,t.font='12px "Segoe UI", sans-serif',t.textAlign="center",n.labels.forEach((f,u)=>{const v=l+u*(d+x)+d/2;t.fillText(f,v,o-12)}),n.legendEnabled?ne(e,n.labels.map((f,u)=>{var v;return{identifier:String(u),label:f,color:((v=b[u])==null?void 0:v[0])||"#2d9cdb",isActive:(n.visibility[u]??1)>.5}}),f=>{const u=A.get(e);if(!u)return;const v=Number(f);if(!Number.isFinite(v))return;const c=u.visibility[v]??1,p=c>.5?0:1;H({animationKey:`bar-toggle:${e.id}:${v}`,durationMs:340,onUpdate(h){const I=A.get(e);I&&(I.visibility[v]=c+(p-c)*h,Q(e),T(e))}})}):re(e)}function Se(e,n,r){const t=A.get(e);if(!t)return null;for(let i=0;i<t.bars.length;i+=1){const o=t.bars[i],l=n>=o.x-6&&n<=o.x+o.width+6,s=r>=t.chartTop&&r<=t.chartBottom;if(l&&s)return(t.visibility[o.index]??1)>.05?o.index:null}return null}function Ae(e){const n=A.get(e);!n||n.initialized||(n.initialized=!0,e.addEventListener("mousemove",r=>{const t=A.get(e);if(!t)return;const i=e.getBoundingClientRect(),o=r.clientX-i.left,l=r.clientY-i.top,s=Se(e,o,l);if(t.hoverIndex=s,Q(e),s===null){e.style.cursor="default",T(e);return}e.style.cursor="pointer",O(e,o+14,l-8,J(t.labels[s]||"Item",[{label:t.valueLabel,value:Math.round((t.values[s]??0)*(t.visibility[s]??1)),accentColor:"#2d9cdb"}]))}),e.addEventListener("mouseleave",()=>{const r=A.get(e);r&&(r.hoverIndex=null,Q(e),e.style.cursor="default",T(e))}))}function Pe(e,n,r,t,i){const o=A.get(e),l={labels:n,values:r,visibility:r.map((s,a)=>(o==null?void 0:o.visibility[a])??1),theme:t,progress:0,hoverIndex:(o==null?void 0:o.hoverIndex)??null,initialized:(o==null?void 0:o.initialized)??!1,bars:[],valueLabel:(i==null?void 0:i.valueLabel)||"Value",legendEnabled:(i==null?void 0:i.enableLegend)!==!1,chartTop:0,chartBottom:0};A.set(e,l),Ae(e),H({animationKey:`bar:${e.id}`,durationMs:820,onUpdate(s){const a=A.get(e);a&&(a.progress=s,Q(e))}})}const P=new WeakMap;function R(e,n){return Math.max(0,(e.values[n]??0)*(e.visibility[n]??1))}function Z(e){const n=P.get(e);if(!n)return;const r=F(e,280);if(!r)return;const{context:t,width:i,height:o}=r;U(t,i,o,n.theme.panelBackground);const l=n.values.reduce((M,d,x)=>M+R(n,x),0)||1,s=i/2,a=o/2,m=Math.min(i,o)*.36,y=m*n.cutoutRatio;let g=-Math.PI/2;n.values.forEach((M,d)=>{const x=R(n,d),b=x/l*Math.PI*2,f=b*n.progress,u=g+f,v=n.hoverIndex===d,c=g+f/2,p=v?8:0,h=Math.cos(c)*p,I=Math.sin(c)*p;x>0&&(t.beginPath(),t.arc(s+h,a+I,m,g,u),t.arc(s+h,a+I,y,u,g,!0),t.closePath(),t.fillStyle=n.colors[d]||"#cfd8e8",t.fill()),g+=b}),t.beginPath(),t.arc(s,a,y,0,Math.PI*2),t.fillStyle=n.theme.doughnutHoleBackground,t.fill(),n.legendEnabled?ne(e,n.values.map((M,d)=>({identifier:String(d),label:n.labels[d]||`Item ${d+1}`,color:n.colors[d]||"#cfd8e8",isActive:(n.visibility[d]??1)>.5})),M=>{const d=P.get(e);if(!d)return;const x=Number(M);if(!Number.isFinite(x))return;const b=d.visibility[x]??1,f=b>.5?0:1;H({animationKey:`doughnut-toggle:${e.id}:${x}`,durationMs:360,onUpdate(u){const v=P.get(e);v&&(v.visibility[x]=b+(f-b)*u,Z(e),T(e))}})}):re(e)}function ke(e,n,r){const t=P.get(e);if(!t)return null;const i=e.clientWidth,o=e.clientHeight,l=i/2,s=o/2,a=Math.min(i,o)*.36,m=a*t.cutoutRatio,y=n-l,g=r-s,M=Math.sqrt(y*y+g*g);if(M<m||M>a+12)return null;let d=Math.atan2(g,y)+Math.PI/2;d<0&&(d+=Math.PI*2);const x=t.values.reduce((f,u,v)=>f+R(t,v),0)||1;let b=0;for(let f=0;f<t.values.length;f+=1){const u=R(t,f);if(b+=u/x*Math.PI*2,d<=b&&u>0)return f}return null}function we(e){const n=P.get(e);!n||n.initialized||(n.initialized=!0,e.addEventListener("mousemove",r=>{const t=P.get(e);if(!t)return;const i=e.getBoundingClientRect(),o=r.clientX-i.left,l=r.clientY-i.top,s=ke(e,o,l);if(t.hoverIndex=s,Z(e),s===null){e.style.cursor="default",T(e);return}e.style.cursor="pointer";const a=R(t,s),m=t.values.reduce((M,d,x)=>M+R(t,x),0)||1,y=(a/m*100).toFixed(1),g=t.labels[s]||`Item ${s+1}`;O(e,o+12,l-8,J(g,[{label:t.valueLabel,value:a,accentColor:t.colors[s]},{label:t.shareLabel,value:`${y}%`}]))}),e.addEventListener("mouseleave",()=>{const r=P.get(e);r&&(r.hoverIndex=null,Z(e),e.style.cursor="default",T(e))}))}function Be(e,n,r,t,i=.56,o=[],l){const s=P.get(e),a={values:n,colors:r,labels:o,visibility:n.map((m,y)=>(s==null?void 0:s.visibility[y])??1),theme:t,cutoutRatio:i,progress:0,hoverIndex:(s==null?void 0:s.hoverIndex)??null,initialized:(s==null?void 0:s.initialized)??!1,valueLabel:(l==null?void 0:l.valueLabel)||"Value",shareLabel:(l==null?void 0:l.shareLabel)||"Share",legendEnabled:(l==null?void 0:l.enableLegend)!==!1};P.set(e,a),we(e),H({animationKey:`doughnut:${e.id}`,durationMs:900,onUpdate(m){const y=P.get(e);y&&(y.progress=m,Z(e))}})}const _=new WeakMap;function oe(e){const n=_.get(e);if(!n)return;const r=F(e,280);if(!r)return;const{context:t,width:i,height:o}=r;U(t,i,o,n.theme.panelBackground);const l=Math.max(n.labels.length,3),s=Math.max(...n.values,0),a=Math.max(s,1),m=i/2,y=o/2,g=Math.min(i,o)*.32;t.strokeStyle=n.theme.grid,t.lineWidth=1;for(let M=1;M<=4;M+=1){const d=g/4*M;t.beginPath();for(let x=0;x<l;x+=1){const b=-Math.PI/2+Math.PI*2*x/l,f=m+Math.cos(b)*d,u=y+Math.sin(b)*d;x===0?t.moveTo(f,u):t.lineTo(f,u)}t.closePath(),t.stroke()}if(s<=0){t.fillStyle=$(n.theme.textSecondary,.8),t.font='14px "Segoe UI", sans-serif',t.textAlign="center",t.textBaseline="middle",t.fillText(n.noDataLabel,m,y),n.points=[];return}t.beginPath(),n.values.forEach((M,d)=>{const x=-Math.PI/2+Math.PI*2*d/n.values.length,b=Math.max(0,M)/a*g*n.progress,f=m+Math.cos(x)*b,u=y+Math.sin(x)*b;d===0?t.moveTo(f,u):t.lineTo(f,u)}),t.closePath(),t.fillStyle=$(n.colors[0]||n.theme.lineJoin,.2),t.strokeStyle=n.colors[0]||n.theme.lineJoin,t.lineWidth=2,t.fill(),t.stroke(),n.points=[],n.values.forEach((M,d)=>{const x=-Math.PI/2+Math.PI*2*d/n.values.length,b=Math.max(0,M)/a*g*n.progress,f=m+Math.cos(x)*b,u=y+Math.sin(x)*b,v=n.colors[d%n.colors.length]||n.theme.lineJoin,c=n.hoverIndex===d;t.beginPath(),t.arc(f,u,c?6.5:5,0,Math.PI*2),t.fillStyle=v,t.fill(),c&&(t.beginPath(),t.arc(f,u,10,0,Math.PI*2),t.strokeStyle=$(v,.4),t.lineWidth=1.5,t.stroke()),n.points.push({x:f,y:u,label:n.labels[d]||`Item ${d+1}`,value:M,color:v})})}function _e(e,n,r){const t=_.get(e);if(!t)return null;let i=null,o=Number.POSITIVE_INFINITY;return t.points.forEach((l,s)=>{const a=n-l.x,m=r-l.y,y=Math.sqrt(a*a+m*m);y<=12&&y<o&&(o=y,i=s)}),i}function Ve(e){const n=_.get(e);!n||n.initialized||(n.initialized=!0,e.addEventListener("mousemove",r=>{const t=_.get(e);if(!t)return;const i=e.getBoundingClientRect(),o=r.clientX-i.left,l=r.clientY-i.top,s=_e(e,o,l);if(t.hoverIndex=s,oe(e),s===null){e.style.cursor="default",T(e);return}const a=t.points[s];e.style.cursor="pointer",O(e,o+12,l-10,J(a.label,[{label:t.valueLabel,value:a.value,accentColor:a.color}]))}),e.addEventListener("mouseleave",()=>{const r=_.get(e);r&&(r.hoverIndex=null,oe(e),e.style.cursor="default",T(e))}))}function $e(e,n,r,t,i,o){const l=_.get(e),s={labels:n,values:r,colors:t,theme:i,progress:0,hoverIndex:(l==null?void 0:l.hoverIndex)??null,initialized:(l==null?void 0:l.initialized)??!1,points:[],valueLabel:(o==null?void 0:o.valueLabel)||"Value",noDataLabel:(o==null?void 0:o.noDataLabel)||"No data"};_.set(e,s),Ve(e),H({animationKey:`radar:${e.id}`,durationMs:760,onUpdate(a){const m=_.get(e);m&&(m.progress=a,oe(e))}})}const L={line:new Map,bar:new Map,doughnut:new Map,radar:new Map};let se=null,Y=null;function E(e){return e.closest(".statistics-widget-root")||document.body||document.documentElement}function ae(){Y!==null&&(cancelAnimationFrame(Y),Y=null),Y=requestAnimationFrame(()=>{Y=null,ie()})}function ee(){if(se)return;const e=new MutationObserver(()=>{ae()});e.observe(document.documentElement,{attributes:!0,attributeFilter:["style","class","data-theme","theme"]}),document.body&&e.observe(document.body,{attributes:!0,attributeFilter:["style","class","data-theme","theme"]}),window.addEventListener("resize",()=>ae()),se=e}function He(e){return{canvasElement:e.canvasElement,labels:[...e.labels],series:e.series.map(n=>({identifier:String(n.identifier),label:String(n.label),values:[...n.values],color:n.color})),options:{...e.options}}}function ze(e){return{canvasElement:e.canvasElement,labels:[...e.labels],values:[...e.values],colors:e.colors?[...e.colors]:void 0,options:{...e.options}}}function Re(e){return{canvasElement:e.canvasElement,values:[...e.values],labels:e.labels?[...e.labels]:void 0,colors:e.colors?[...e.colors]:void 0,cutoutRatio:e.cutoutRatio,options:{...e.options}}}function We(e){return{canvasElement:e.canvasElement,labels:[...e.labels],values:[...e.values],colors:e.colors?[...e.colors]:void 0,options:{...e.options}}}function ce(e){var r;const n=X(E(e.canvasElement));Ce(e.canvasElement,e.labels,e.series.map((t,i)=>({...t,color:t.color||n.palette[i%n.palette.length]})),n,{enableLegend:(r=e.options)==null?void 0:r.enableLegend})}function de(e){var r,t;const n=X(E(e.canvasElement));Pe(e.canvasElement,e.labels,e.values,n,{enableLegend:(r=e.options)==null?void 0:r.enableLegend,valueLabel:(t=e.options)==null?void 0:t.valueLabel})}function ue(e){var r,t,i;const n=X(E(e.canvasElement));Be(e.canvasElement,e.values,e.colors||n.palette.slice(0,e.values.length||1),n,e.cutoutRatio,e.labels,{enableLegend:(r=e.options)==null?void 0:r.enableLegend,valueLabel:(t=e.options)==null?void 0:t.valueLabel,shareLabel:(i=e.options)==null?void 0:i.shareLabel})}function he(e){var r,t;const n=X(E(e.canvasElement));$e(e.canvasElement,e.labels,e.values,e.colors||n.palette.slice(0,e.values.length||1),n,{valueLabel:(r=e.options)==null?void 0:r.valueLabel,noDataLabel:(t=e.options)==null?void 0:t.noDataLabel})}function fe(e){const n=He(e);L.line.set(n.canvasElement,n),ce(n),ee()}function ge(e){const n=ze(e);L.bar.set(n.canvasElement,n),de(n),ee()}function be(e){const n=Re(e);L.doughnut.set(n.canvasElement,n),ue(n),ee()}function ye(e){const n=We(e);L.radar.set(n.canvasElement,n),he(n),ee()}function ie(){L.line.forEach(e=>ce(e)),L.bar.forEach(e=>de(e)),L.doughnut.forEach(e=>ue(e)),L.radar.forEach(e=>he(e))}function me(e){L.line.delete(e),L.bar.delete(e),L.doughnut.delete(e),L.radar.delete(e)}function xe(){L.line.clear(),L.bar.clear(),L.doughnut.clear(),L.radar.clear()}const Me={renderLineChart:fe,renderBarChart:ge,renderDoughnutChart:be,renderRadarChart:ye,refresh:ie,destroy:me,destroyAll:xe};return typeof window<"u"&&(window.WebHackerStatistics=Me),C.destroy=me,C.destroyAll=xe,C.refresh=ie,C.renderBarChart=ge,C.renderDoughnutChart=be,C.renderLineChart=fe,C.renderRadarChart=ye,C.widgetApi=Me,Object.defineProperty(C,Symbol.toStringTag,{value:"Module"}),C})({});

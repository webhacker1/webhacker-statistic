(function(){"use strict";try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode('.statistics-widget-root,:root{--statistics-panel-background: var(--background-color, #ffffff);--statistics-panel-border: var(--border-color, #dbe7f5);--statistics-text-primary: var(--text-color, #1d3048);--statistics-text-secondary: var(--muted-text-color, #56708f)}.period-selector{display:flex;align-items:center;gap:8px;flex-wrap:wrap}.period-selector .chip{border:1px solid color-mix(in srgb,var(--statistics-panel-border, #dbe7f5) 80%,#9fc2ea 20%);border-radius:999px;background:color-mix(in srgb,var(--statistics-panel-background, #ffffff) 92%,#f6faff 8%);color:var(--statistics-text-secondary, #35506f);padding:7px 14px;cursor:pointer;transition:all .2s ease;box-shadow:0 2px 6px #1e36560f}.period-selector .chip:hover{transform:translateY(-1px);box-shadow:0 5px 12px #1e36561f}.period-selector .chip.active{border-color:#2d93df;color:#2d93df;background:color-mix(in srgb,var(--statistics-panel-background, #ffffff) 88%,#edf7ff 12%)}.grid{display:grid;grid-template-columns:repeat(2,minmax(280px,1fr));gap:16px}.card{position:relative;overflow:hidden;background:var(--statistics-panel-background, #ffffff);border:1px solid var(--statistics-panel-border, #dbe7f5);border-radius:16px;padding:14px;box-shadow:0 10px 28px #152a4614;transition:transform .18s ease,box-shadow .18s ease}.card:before{content:"";position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none;background:radial-gradient(circle at 10% 0%,rgba(45,156,219,.08),transparent 46%)}.card:hover{transform:translateY(-2px);box-shadow:0 16px 36px #152a461f}.card h3{margin:0 0 12px;color:var(--statistics-text-primary, #1d3048);font-size:16px;font-weight:700;position:relative;z-index:1}.wide{grid-column:span 2}.canvas-wrap{height:320px;position:relative;z-index:1}canvas{display:block;width:100%;height:100%}.statistics-tooltip{position:absolute;z-index:50;min-width:146px;max-width:260px;padding:8px 10px;border-radius:12px;border:1px solid color-mix(in srgb,var(--statistics-panel-border, #dbe7f5) 78%,#2d9cdb 22%);background:color-mix(in srgb,var(--statistics-panel-background, #ffffff) 92%,#ffffff 8%);box-shadow:0 16px 36px #152a462e;-webkit-backdrop-filter:blur(7px);backdrop-filter:blur(7px);transform:translateY(-100%);pointer-events:none;transition:opacity .12s ease;color:var(--statistics-text-primary, #1d3048)}.statistics-tooltip__title{margin:0 0 6px;font-size:12px;line-height:1.2;font-weight:700}.statistics-tooltip__row{display:flex;align-items:center;justify-content:space-between;gap:10px;margin:3px 0;font-size:12px;color:var(--statistics-text-secondary, #56708f)}.statistics-tooltip__row span{display:inline-flex;align-items:center;gap:6px}.statistics-tooltip__dot{width:8px;height:8px;border-radius:999px;background:var(--statistics-tooltip-dot-color, #2d9cdb);box-shadow:0 0 0 3px #2d9cdb26}.statistics-tooltip__row strong{color:var(--statistics-text-primary, #1d3048);font-weight:700}.statistics-legend{position:relative;z-index:1;margin-top:12px;display:flex;align-items:center;gap:9px;flex-wrap:wrap}.statistics-legend__item{border:1px solid rgba(45,156,219,.24);background:color-mix(in srgb,var(--statistics-panel-background, #ffffff) 92%,#ffffff 8%);border-radius:999px;padding:6px 11px;color:var(--statistics-text-primary, #1d3048);display:inline-flex;align-items:center;gap:7px;cursor:pointer;font-size:12px;line-height:1;box-shadow:0 6px 14px #152a4614;transition:transform .16s ease,background-color .16s ease,opacity .16s ease,box-shadow .16s ease}.statistics-legend__item:hover{transform:translateY(-1px);background:color-mix(in srgb,var(--statistics-panel-background, #ffffff) 86%,#ffffff 14%);box-shadow:0 9px 18px #152a461f}.statistics-legend__item--inactive{opacity:.54}.statistics-legend__item--inactive span{text-decoration:line-through}.statistics-legend__dot{width:9px;height:9px;border-radius:999px;background:var(--statistics-legend-dot-color, #2d9cdb);box-shadow:0 0 0 3px #2d9cdb1f}@media(max-width:900px){.grid{grid-template-columns:1fr}.wide{grid-column:auto}.canvas-wrap{height:280px}.statistics-legend__item{font-size:11px;padding:6px 10px}}@media(max-width:560px){body{padding:12px}.card{padding:12px;border-radius:14px}.card h3{font-size:15px}.canvas-wrap{height:240px}}')),document.head.appendChild(t)}}catch(i){console.error("vite-plugin-css-injected-by-js",i)}})();
var WebHackerStatistics=(function(R){"use strict";const P={panelBackground:"--statistics-panel-background",panelBorder:"--statistics-panel-border",textPrimary:"--statistics-text-primary",textSecondary:"--statistics-text-secondary",lineJoin:"--statistics-line-join",lineLeave:"--statistics-line-leave",success:"--statistics-success",danger:"--statistics-danger",grid:"--statistics-grid",doughnutHoleBackground:"--statistics-doughnut-hole-background"},S={panelBackground:"#ffffff",panelBorder:"#dbe7f5",textPrimary:"#1d3048",textSecondary:"#667e9a",lineJoin:"#28a745",lineLeave:"#e74c3c",success:"#28a745",danger:"#e74c3c",grid:"#e3ecf8",doughnutHoleBackground:"#edf3fa"};function V(e,i){return getComputedStyle(document.documentElement).getPropertyValue(e).trim()||i}function X(e,i){for(let n=0;n<e.length;n+=1){const t=e[n],o=getComputedStyle(document.documentElement).getPropertyValue(t).trim();if(o)return o}return i}function z(e,i=.2){if(e.startsWith("#")&&e.length===7){const n=Number.parseInt(e.slice(1,3),16),t=Number.parseInt(e.slice(3,5),16),o=Number.parseInt(e.slice(5,7),16);return`rgba(${n}, ${t}, ${o}, ${i})`}return e.startsWith("rgb(")?e.replace("rgb(","rgba(").replace(")",`, ${i})`):e}function D(){return{panelBackground:X([P.panelBackground,"--background-color","--surface-color"],S.panelBackground),panelBorder:X([P.panelBorder,"--border-color"],S.panelBorder),textPrimary:X([P.textPrimary,"--text-color","--color-text"],S.textPrimary),textSecondary:X([P.textSecondary,"--muted-text-color","--color-text-secondary"],S.textSecondary),lineJoin:V(P.lineJoin,S.lineJoin),lineLeave:V(P.lineLeave,S.lineLeave),success:V(P.success,S.success),danger:V(P.danger,S.danger),grid:V(P.grid,S.grid),doughnutHoleBackground:V(P.doughnutHoleBackground,S.doughnutHoleBackground),palette:["#4caf50","#2196f3","#ff9800","#9c27b0","#ffc107","#00bcd4","#6a5acd","#ff5722","#2ecc71","#e91e63"]}}const Y=new Map;function $({animationKey:e,durationMs:i=700,onUpdate:n}){const t=Y.get(e);typeof t=="number"&&(cancelAnimationFrame(t),Y.delete(e));const o=performance.now(),s=l=>{const c=l-o,b=Math.min(c/i,1),h=1-Math.pow(1-b,3);if(n(h),b<1){const u=requestAnimationFrame(s);Y.set(e,u);return}Y.delete(e)},r=requestAnimationFrame(s);Y.set(e,r)}function F(e,i=280){const n=e.getContext("2d");if(!n)return null;const t=window.devicePixelRatio||1,o=Math.max(280,Math.floor(e.clientWidth)),s=Math.floor(e.clientHeight),r=Math.min(460,Math.max(i,Number.isFinite(s)?s:i));return e.width=Math.floor(o*t),e.height=Math.floor(r*t),n.setTransform(t,0,0,t,0,0),{width:o,height:r,context:n}}function q(e,i,n,t){e.clearRect(0,0,i,n),e.fillStyle=t,e.fillRect(0,0,i,n)}const E=new WeakMap;function ge(e){const i=E.get(e);if(i)return i;const n=e.parentElement;if(!n)return null;getComputedStyle(n).position==="static"&&(n.style.position="relative");const t=document.createElement("div");return t.className="statistics-tooltip",t.style.opacity="0",n.appendChild(t),E.set(e,t),t}function O(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/'/g,"&#39;")}function U(e,i){const n=i.map(t=>`
                <div class="statistics-tooltip__row">
                    <span>${t.accentColor?`<i class="statistics-tooltip__dot" style="--statistics-tooltip-dot-color: ${O(t.accentColor)}"></i>`:""}${O(t.label)}</span>
                    <strong>${O(t.value)}</strong>
                </div>
            `).join("");return`
        <div class="statistics-tooltip__title">${O(e)}</div>
        ${n}
    `}function j(e,i,n,t){const o=ge(e);if(!o)return;o.innerHTML=t;const s=e.parentElement,r=s?s.clientWidth:0,l=r?Math.max(10,Math.min(i,r-10)):i;o.style.left=`${l}px`,o.style.top=`${Math.max(10,n)}px`,o.style.opacity="1"}function C(e){const i=E.get(e);i&&(i.style.opacity="0")}const J=new WeakMap;function K(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/'/g,"&#39;")}function fe(e){const i=e.parentElement;return i?i.closest(".card")||i:null}function be(e){const i=J.get(e);if(i)return i.legendElement;const n=fe(e);if(!n)return null;const t=document.createElement("div");t.className="statistics-legend",n.appendChild(t);const o={legendElement:t,onToggle:()=>{}};return t.addEventListener("click",s=>{var l;const r=(l=s.target)==null?void 0:l.closest(".statistics-legend__item");r&&o.onToggle(r.dataset.identifier||"")}),J.set(e,o),t}function w(e,i,n){const t=be(e);if(!t)return;const o=J.get(e);o&&(o.onToggle=n,t.innerHTML=i.map(s=>`
                <button
                    type="button"
                    class="statistics-legend__item${s.isActive?"":" statistics-legend__item--inactive"}"
                    data-identifier="${K(s.identifier)}"
                    title="${K(s.label)}"
                >
                    <i class="statistics-legend__dot" style="--statistics-legend-dot-color: ${K(s.color)}"></i>
                    <span>${K(s.label)}</span>
                </button>
            `).join(""))}function ee(e){const i=J.get(e);i&&(i.legendElement.innerHTML="")}const k=new WeakMap;function G(e){const i=k.get(e);if(!i)return;const n=F(e,300);if(!n)return;const{context:t,width:o,height:s}=n;q(t,o,s,i.theme.panelBackground);const r=40,l=16,c=16,b=38,h=o-r-l,u=s-c-b,g=i.series.filter(a=>a.visibility>.02),d=g.flatMap(a=>a.values),x=Math.max(...d,1),m=h/Math.max(i.labels.length-1,1);t.strokeStyle=i.theme.grid,t.lineWidth=1;for(let a=0;a<=4;a+=1){const M=c+u/4*a;t.beginPath(),t.moveTo(r,M),t.lineTo(o-l,M),t.stroke()}const y=new Map;if(g.forEach(a=>{const M=a.values.map((f,v)=>{const N=r+m*v,B=Math.max(0,f*a.visibility)/x,H=c+u-B*u*i.progress;return{x:N,y:H}});t.beginPath(),M.forEach((f,v)=>{v===0?t.moveTo(f.x,f.y):t.lineTo(f.x,f.y)}),t.lineTo(r+m*(M.length-1),c+u),t.lineTo(r,c+u),t.closePath(),t.fillStyle=z(a.color,.15*a.visibility),t.fill(),t.beginPath(),M.forEach((f,v)=>{v===0?t.moveTo(f.x,f.y):t.lineTo(f.x,f.y)}),t.strokeStyle=a.color,t.lineWidth=2.6,t.globalAlpha=Math.max(.1,a.visibility),t.stroke(),t.globalAlpha=1,M.forEach((f,v)=>{const N=v===i.hoverIndex&&a.visibility>.5;t.beginPath(),t.arc(f.x,f.y,N?5.5:4,0,Math.PI*2),t.fillStyle=a.color,t.fill()}),y.set(a.identifier,M)}),i.hoverIndex!==null&&i.hoverIndex>=0&&i.hoverIndex<i.labels.length){const a=r+m*i.hoverIndex;t.strokeStyle=z(i.theme.textSecondary,.28),t.setLineDash([4,4]),t.beginPath(),t.moveTo(a,c),t.lineTo(a,c+u),t.stroke(),t.setLineDash([]),g.forEach(M=>{const f=y.get(M.identifier),v=f==null?void 0:f[i.hoverIndex??0];v&&(t.beginPath(),t.arc(v.x,v.y,8,0,Math.PI*2),t.strokeStyle=z(M.color,.45),t.lineWidth=1.5,t.stroke())})}t.fillStyle=i.theme.textSecondary,t.font='12px "Segoe UI", sans-serif',t.textAlign="center";const p=Math.max(2,Math.floor(h/62)),I=Math.max(1,Math.ceil(i.labels.length/p));i.labels.forEach((a,M)=>{const f=M===i.labels.length-1;(M%I===0||f)&&t.fillText(a,r+m*M,s-12)}),i.legendEnabled?w(e,i.series.map(a=>({identifier:a.identifier,label:a.label,color:a.color,isActive:a.visibility>.5})),a=>{const M=k.get(e);if(!M)return;const f=M.series.find(B=>B.identifier===a);if(!f)return;const v=f.visibility,N=v>.5?0:1;$({animationKey:`line-toggle:${e.id}:${f.identifier}`,durationMs:360,onUpdate(B){const H=k.get(e);if(!H)return;const he=H.series.find(He=>He.identifier===a);he&&(he.visibility=v+(N-v)*B,G(e),C(e))}})}):ee(e)}function ye(e){const i=k.get(e);!i||i.initialized||(i.initialized=!0,e.addEventListener("mousemove",n=>{const t=k.get(e);if(!t||t.labels.length===0)return;const o=e.getBoundingClientRect(),s=40,c=(o.width-s-16)/Math.max(t.labels.length-1,1),b=n.clientX-o.left-s,h=Math.round(b/Math.max(c,1)),u=Math.max(0,Math.min(t.labels.length-1,h));t.hoverIndex=u,G(e);const g=t.series.filter(m=>m.visibility>.02);if(g.length===0){e.style.cursor="default",C(e);return}e.style.cursor="crosshair";const d=n.clientX-o.left,x=n.clientY-o.top;j(e,d+14,x-10,U(t.labels[u],g.map(m=>({label:m.label,value:Math.round((m.values[u]??0)*m.visibility),accentColor:m.color}))))}),e.addEventListener("mouseleave",()=>{const n=k.get(e);n&&(n.hoverIndex=null,G(e),e.style.cursor="default",C(e))}))}function me(e,i,n,t,o){const s=k.get(e),r={labels:i,series:n.map(l=>{const c=s==null?void 0:s.series.find(b=>b.identifier===l.identifier);return{...l,visibility:(c==null?void 0:c.visibility)??1}}),theme:t,progress:0,hoverIndex:(s==null?void 0:s.hoverIndex)??null,initialized:(s==null?void 0:s.initialized)??!1,legendEnabled:(o==null?void 0:o.enableLegend)!==!1};k.set(e,r),ye(e),$({animationKey:`line:${e.id}`,durationMs:850,onUpdate(l){const c=k.get(e);c&&(c.progress=l,G(e))}})}const A=new WeakMap;function W(e,i){return Math.max(0,(e.values[i]??0)*(e.visibility[i]??1))}function Q(e){const i=A.get(e);if(!i)return;const n=F(e,280);if(!n)return;const{context:t,width:o,height:s}=n;q(t,o,s,i.theme.panelBackground);const r=i.values.reduce((g,d,x)=>g+W(i,x),0)||1,l=o/2,c=s/2,b=Math.min(o,s)*.36,h=b*i.cutoutRatio;let u=-Math.PI/2;i.values.forEach((g,d)=>{const x=W(i,d),m=x/r*Math.PI*2,y=m*i.progress,p=u+y,I=i.hoverIndex===d,a=u+y/2,M=I?8:0,f=Math.cos(a)*M,v=Math.sin(a)*M;x>0&&(t.beginPath(),t.arc(l+f,c+v,b,u,p),t.arc(l+f,c+v,h,p,u,!0),t.closePath(),t.fillStyle=i.colors[d]||"#cfd8e8",t.fill()),u+=m}),t.beginPath(),t.arc(l,c,h,0,Math.PI*2),t.fillStyle=i.theme.doughnutHoleBackground,t.fill(),i.legendEnabled?w(e,i.values.map((g,d)=>({identifier:String(d),label:i.labels[d]||`Item ${d+1}`,color:i.colors[d]||"#cfd8e8",isActive:(i.visibility[d]??1)>.5})),g=>{const d=A.get(e);if(!d)return;const x=Number(g);if(!Number.isFinite(x))return;const m=d.visibility[x]??1,y=m>.5?0:1;$({animationKey:`doughnut-toggle:${e.id}:${x}`,durationMs:360,onUpdate(p){const I=A.get(e);I&&(I.visibility[x]=m+(y-m)*p,Q(e),C(e))}})}):ee(e)}function pe(e,i,n){const t=A.get(e);if(!t)return null;const o=e.clientWidth,s=e.clientHeight,r=o/2,l=s/2,c=Math.min(o,s)*.36,b=c*t.cutoutRatio,h=i-r,u=n-l,g=Math.sqrt(h*h+u*u);if(g<b||g>c+12)return null;let d=Math.atan2(u,h)+Math.PI/2;d<0&&(d+=Math.PI*2);const x=t.values.reduce((y,p,I)=>y+W(t,I),0)||1;let m=0;for(let y=0;y<t.values.length;y+=1){const p=W(t,y);if(m+=p/x*Math.PI*2,d<=m&&p>0)return y}return null}function xe(e){const i=A.get(e);!i||i.initialized||(i.initialized=!0,e.addEventListener("mousemove",n=>{const t=A.get(e);if(!t)return;const o=e.getBoundingClientRect(),s=n.clientX-o.left,r=n.clientY-o.top,l=pe(e,s,r);if(t.hoverIndex=l,Q(e),l===null){e.style.cursor="default",C(e);return}e.style.cursor="pointer";const c=W(t,l),b=t.values.reduce((g,d,x)=>g+W(t,x),0)||1,h=(c/b*100).toFixed(1),u=t.labels[l]||`Item ${l+1}`;j(e,s+12,r-8,U(u,[{label:t.valueLabel,value:c,accentColor:t.colors[l]},{label:t.shareLabel,value:`${h}%`}]))}),e.addEventListener("mouseleave",()=>{const n=A.get(e);n&&(n.hoverIndex=null,Q(e),e.style.cursor="default",C(e))}))}function se(e,i,n,t,o=.56,s=[],r){const l=A.get(e),c={values:i,colors:n,labels:s,visibility:i.map((b,h)=>(l==null?void 0:l.visibility[h])??1),theme:t,cutoutRatio:o,progress:0,hoverIndex:(l==null?void 0:l.hoverIndex)??null,initialized:(l==null?void 0:l.initialized)??!1,valueLabel:(r==null?void 0:r.valueLabel)||"Value",shareLabel:(r==null?void 0:r.shareLabel)||"Share",legendEnabled:(r==null?void 0:r.enableLegend)!==!1};A.set(e,c),xe(e),$({animationKey:`doughnut:${e.id}`,durationMs:900,onUpdate(b){const h=A.get(e);h&&(h.progress=b,Q(e))}})}const _=new WeakMap;function re(e,i){return Math.max(0,(e.values[i]??0)*(e.visibility[i]??1))}function Z(e){const i=_.get(e);if(!i)return;const n=F(e,300);if(!n)return;const{context:t,width:o,height:s}=n;q(t,o,s,i.theme.panelBackground);const r=24,l=12,c=14,b=38,h=o-r-l,u=s-c-b,g=Math.max(...i.values.map((y,p)=>re(i,p)),1)||1,d=Math.min(64,h/Math.max(i.values.length*2,1)),x=i.values.length>1?(h-d*i.values.length)/(i.values.length-1):0;t.strokeStyle=i.theme.grid,t.lineWidth=1;for(let y=0;y<=5;y+=1){const p=c+u/5*y;t.beginPath(),t.moveTo(r,p),t.lineTo(o-l,p),t.stroke()}const m=[["#6a5acd","rgba(106,90,205,0.25)"],["#00bcd4","rgba(0,188,212,0.25)"],["#ff5722","rgba(255,87,34,0.25)"]];i.bars=[],i.values.forEach((y,p)=>{var B,H;const I=re(i,p),a=r+p*(d+x),M=I/g*u*i.progress,f=c+(u-M),v=i.hoverIndex===p,N=t.createLinearGradient(0,f,0,c+u);N.addColorStop(0,((B=m[p])==null?void 0:B[0])||"#2d9cdb"),N.addColorStop(1,((H=m[p])==null?void 0:H[1])||"rgba(45,156,219,0.22)"),t.fillStyle=N,t.beginPath(),t.moveTo(a+8,f),t.lineTo(a+d-8,f),t.quadraticCurveTo(a+d,f,a+d,f+8),t.lineTo(a+d,f+M),t.lineTo(a,f+M),t.lineTo(a,f+8),t.quadraticCurveTo(a,f,a+8,f),t.closePath(),t.fill(),v&&I>0&&(t.strokeStyle=z(i.theme.textPrimary,.22),t.lineWidth=2,t.stroke()),i.bars.push({index:p,x:a,y:f,width:d,height:M})}),t.fillStyle=i.theme.textSecondary,t.font='12px "Segoe UI", sans-serif',t.textAlign="center",i.labels.forEach((y,p)=>{const I=r+p*(d+x)+d/2;t.fillText(y,I,s-12)}),i.legendEnabled?w(e,i.labels.map((y,p)=>{var I;return{identifier:String(p),label:y,color:((I=m[p])==null?void 0:I[0])||"#2d9cdb",isActive:(i.visibility[p]??1)>.5}}),y=>{const p=_.get(e);if(!p)return;const I=Number(y);if(!Number.isFinite(I))return;const a=p.visibility[I]??1,M=a>.5?0:1;$({animationKey:`bar-toggle:${e.id}:${I}`,durationMs:340,onUpdate(f){const v=_.get(e);v&&(v.visibility[I]=a+(M-a)*f,Z(e),C(e))}})}):ee(e)}function Me(e,i,n){const t=_.get(e);if(!t)return null;for(let o=0;o<t.bars.length;o+=1){const s=t.bars[o];if(i>=s.x&&i<=s.x+s.width&&n>=s.y&&n<=s.y+s.height)return(t.visibility[s.index]??1)>.05?s.index:null}return null}function Ie(e){const i=_.get(e);!i||i.initialized||(i.initialized=!0,e.addEventListener("mousemove",n=>{const t=_.get(e);if(!t)return;const o=e.getBoundingClientRect(),s=n.clientX-o.left,r=n.clientY-o.top,l=Me(e,s,r);if(t.hoverIndex=l,Z(e),l===null){e.style.cursor="default",C(e);return}e.style.cursor="pointer",j(e,s+14,r-8,U(t.labels[l]||"Item",[{label:t.valueLabel,value:Math.round((t.values[l]??0)*(t.visibility[l]??1)),accentColor:"#2d9cdb"}]))}),e.addEventListener("mouseleave",()=>{const n=_.get(e);n&&(n.hoverIndex=null,Z(e),e.style.cursor="default",C(e))}))}function ve(e,i,n,t,o){const s=_.get(e),r={labels:i,values:n,visibility:n.map((l,c)=>(s==null?void 0:s.visibility[c])??1),theme:t,progress:0,hoverIndex:(s==null?void 0:s.hoverIndex)??null,initialized:(s==null?void 0:s.initialized)??!1,bars:[],valueLabel:o==null?void 0:o.valueLabel,legendEnabled:(o==null?void 0:o.enableLegend)!==!1};_.set(e,r),Ie(e),$({animationKey:`bar:${e.id}`,durationMs:820,onUpdate(l){const c=_.get(e);c&&(c.progress=l,Z(e))}})}function Le(e){return Array.isArray(e)?e.map(i=>({date:typeof(i==null?void 0:i.date)=="string"?i.date:"",join:Number(i==null?void 0:i.join)||0,leave:Number(i==null?void 0:i.leave)||0})):[]}function Ce(e){return{text:Number(e==null?void 0:e.text)||0,video:Number(e==null?void 0:e.video)||0,test:Number(e==null?void 0:e.test)||0,blank:Number(e==null?void 0:e.blank)||0,matching:Number(e==null?void 0:e.matching)||0}}function Pe(e){return{modules:Number(e==null?void 0:e.modules)||0,lessons:Number(e==null?void 0:e.lessons)||0,steps:Number(e==null?void 0:e.steps)||0}}function Se(e){return{activityData:Le(e==null?void 0:e.activityData),stepTypeData:Ce(e==null?void 0:e.stepTypeData),structure:Pe(e==null?void 0:e.structure)}}function Ae(e){const i=new Date(`${e}T00:00`);return Number.isNaN(i.getTime())?e:i.toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit"})}function _e(e,i){if(i==="all")return[...e].sort((o,s)=>o.date.getTime()-s.date.getTime());const n=Number(i)||7,t=new Date(new Date().setHours(0,0,0,0)-(n-1)*864e5);return e.filter(o=>o.date>=t).sort((o,s)=>o.date.getTime()-s.date.getTime())}function le(e,i,n){const t=Se(e),o={text:(i==null?void 0:i.text)||"Текст",video:(i==null?void 0:i.video)||"Видео",test:(i==null?void 0:i.test)||"Тест",blank:(i==null?void 0:i.blank)||"Пропуски",matching:(i==null?void 0:i.matching)||"Сопоставление",stat_modules:(i==null?void 0:i.stat_modules)||"Модули",stat_lessons:(i==null?void 0:i.stat_lessons)||"Уроки",stat_steps:(i==null?void 0:i.stat_steps)||"Шаги"},s=t.activityData.map(h=>({date:new Date(`${h.date}T00:00`),join:h.join,leave:h.leave})).filter(h=>!Number.isNaN(h.date.getTime())),r=document.getElementById("activityChart"),l=document.getElementById("stepPie"),c=document.getElementById("structureBar"),b=h=>{if(!r)return;const u=_e(s,h);me(r,u.map(g=>Ae(g.date.toISOString().slice(0,10))),[{identifier:"joined",label:"Записались",values:u.map(g=>g.join),color:n.lineJoin},{identifier:"left",label:"Вышли",values:u.map(g=>g.leave),color:n.lineLeave}],n,{enableLegend:!0})};b("7"),document.querySelectorAll(".period-selector .chip").forEach(h=>{const u=h;u.onclick=()=>{document.querySelectorAll(".period-selector .chip").forEach(g=>g.classList.remove("active")),u.classList.add("active"),b(u.dataset.period||"7")}}),l&&se(l,[t.stepTypeData.text,t.stepTypeData.video,t.stepTypeData.test,t.stepTypeData.blank,t.stepTypeData.matching],n.palette.slice(0,5),n,.55,[o.text,o.video,o.test,o.blank,o.matching],{valueLabel:"Количество",shareLabel:"Доля",enableLegend:!0}),c&&ve(c,[o.stat_modules,o.stat_lessons,o.stat_steps],[t.structure.modules,t.structure.lessons,t.structure.steps],n,{valueLabel:"Количество",enableLegend:!0})}const T=new WeakMap;function te(e){const i=T.get(e);if(!i)return;const n=F(e,280);if(!n)return;const{context:t,width:o,height:s}=n;q(t,o,s,i.theme.panelBackground);const r=Math.max(i.labels.length,3),l=Math.max(...i.values,1),c=o/2,b=s/2,h=Math.min(o,s)*.32;t.strokeStyle=i.theme.grid,t.lineWidth=1;for(let u=1;u<=4;u+=1){const g=h/4*u;t.beginPath();for(let d=0;d<r;d+=1){const x=-Math.PI/2+Math.PI*2*d/r,m=c+Math.cos(x)*g,y=b+Math.sin(x)*g;d===0?t.moveTo(m,y):t.lineTo(m,y)}t.closePath(),t.stroke()}t.beginPath(),i.values.forEach((u,g)=>{const d=-Math.PI/2+Math.PI*2*g/i.values.length,x=Math.max(0,u)/l*h*i.progress,m=c+Math.cos(d)*x,y=b+Math.sin(d)*x;g===0?t.moveTo(m,y):t.lineTo(m,y)}),t.closePath(),t.fillStyle=z(i.colors[0]||i.theme.lineJoin,.2),t.strokeStyle=i.colors[0]||i.theme.lineJoin,t.lineWidth=2,t.fill(),t.stroke(),i.points=[],i.values.forEach((u,g)=>{const d=-Math.PI/2+Math.PI*2*g/i.values.length,x=Math.max(0,u)/l*h*i.progress,m=c+Math.cos(d)*x,y=b+Math.sin(d)*x,p=i.colors[g%i.colors.length]||i.theme.lineJoin,I=i.hoverIndex===g;t.beginPath(),t.arc(m,y,I?6.5:5,0,Math.PI*2),t.fillStyle=p,t.fill(),I&&(t.beginPath(),t.arc(m,y,10,0,Math.PI*2),t.strokeStyle=z(p,.4),t.lineWidth=1.5,t.stroke()),i.points.push({x:m,y,label:i.labels[g]||`Item ${g+1}`,value:u,color:p})})}function ke(e,i,n){const t=T.get(e);if(!t)return null;let o=null,s=Number.POSITIVE_INFINITY;return t.points.forEach((r,l)=>{const c=i-r.x,b=n-r.y,h=Math.sqrt(c*c+b*b);h<=12&&h<s&&(s=h,o=l)}),o}function Ne(e){const i=T.get(e);!i||i.initialized||(i.initialized=!0,e.addEventListener("mousemove",n=>{const t=T.get(e);if(!t)return;const o=e.getBoundingClientRect(),s=n.clientX-o.left,r=n.clientY-o.top,l=ke(e,s,r);if(t.hoverIndex=l,te(e),l===null){e.style.cursor="default",C(e);return}const c=t.points[l];e.style.cursor="pointer",j(e,s+12,r-10,U(c.label,[{label:t.valueLabel,value:c.value,accentColor:c.color}]))}),e.addEventListener("mouseleave",()=>{const n=T.get(e);n&&(n.hoverIndex=null,te(e),e.style.cursor="default",C(e))}))}function Te(e,i,n,t,o,s){const r=T.get(e),l={labels:i,values:n,colors:t,theme:o,progress:0,hoverIndex:(r==null?void 0:r.hoverIndex)??null,initialized:(r==null?void 0:r.initialized)??!1,points:[],valueLabel:s==null?void 0:s.valueLabel};T.set(e,l),Ne(e),$({animationKey:`radar:${e.id}`,durationMs:760,onUpdate(c){const b=T.get(e);b&&(b.progress=c,te(e))}})}function Be(e){return{countPasses:Number(e==null?void 0:e.countPasses)||0,countCorrectPasses:Number(e==null?void 0:e.countCorrectPasses)||0,answers:Array.isArray(e==null?void 0:e.answers)?e.answers.map(i=>({answer:typeof i.answer=="string"?i.answer:"Без названия",voteCount:Number(i.voteCount)||Number(i.vote_count)||0})):[]}}function ce(e,i,n){const t=Be(i),o=e.querySelector("#successRatioChart"),s=e.querySelector("#answersRadarChart"),r=t.countPasses,l=t.countCorrectPasses,c=Math.max(0,r-l);if(o){const b=r===0?[1]:[l,c],h=r===0?["#d0dae8"]:[n.success,n.danger];se(o,b,h,n,.58,r===0?["Нет данных"]:["Успешно","Неуспешно"],{valueLabel:"Количество",shareLabel:"Процент",enableLegend:!0})}if(s){const b=t.answers.length>0,h=b?t.answers.map(d=>d.answer):["Нет данных"],u=b?t.answers.map(d=>d.voteCount):[1],g=b?t.answers.map((d,x)=>n.palette[x%n.palette.length]):["#c7d6ea"];Te(s,h,u,g,n,{valueLabel:"Голоса"})}}const L={courseInitialized:!1,testInitialized:!1,testContainerElement:null,themeObserver:null,scheduled:null};function ie(){var i;const e=window;return{courseStats:e.courseStats,statData:e.statData,translations:(i=e.translations)==null?void 0:i.course}}function $e(){const e=D(),{courseStats:i,statData:n,translations:t}=ie();L.courseInitialized&&le(i,t,e),L.testInitialized&&L.testContainerElement&&ce(L.testContainerElement,n,e)}function ue(){L.scheduled!==null&&(cancelAnimationFrame(L.scheduled),L.scheduled=null),L.scheduled=requestAnimationFrame(()=>{L.scheduled=null,$e()})}function de(){if(L.themeObserver)return;const e=new MutationObserver(()=>{ue()});e.observe(document.documentElement,{attributes:!0,attributeFilter:["style","class","data-theme","theme"]}),document.body&&e.observe(document.body,{attributes:!0,attributeFilter:["style","class","data-theme","theme"]}),window.addEventListener("resize",()=>ue()),L.themeObserver=e}function ne(){const e=D(),{courseStats:i,translations:n}=ie();le(i,n,e),L.courseInitialized=!0,de()}function oe(e){const i=D(),{statData:n}=ie();ce(e,n,i),L.testInitialized=!0,L.testContainerElement=e,de()}const ae={initStatistic:ne,statisticTest:oe};return typeof window<"u"&&(window.WebHackerStatistics=ae,window.initStatistic=ne,window.statisticTest=oe),R.initStatistic=ne,R.statisticTest=oe,R.widgetApi=ae,Object.defineProperty(R,Symbol.toStringTag,{value:"Module"}),R})({});

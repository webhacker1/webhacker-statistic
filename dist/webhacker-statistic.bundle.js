(function(){"use strict";try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode(".statistics-widget-root{--wh-stat-bg: var(--wh-surface, #ffffff);--wh-stat-grid: var(--wh-grid, #e6edf7);--wh-stat-text-primary: var(--wh-text, #1f2d3d);--wh-stat-text-muted: var(--wh-text-muted, #5f7389);--wh-stat-tooltip-bg: rgba(17, 26, 41, .92);--wh-stat-tooltip-border: rgba(255, 255, 255, .24);--wh-stat-panel-bg: #ffffff;--wh-stat-panel-bg-soft: #f9fcff;--wh-stat-panel-border: #c7d8ee;--wh-stat-shadow: rgba(15, 37, 68, .12)}@media(prefers-color-scheme:dark){.statistics-widget-root:not([data-theme=light]){--wh-stat-bg: #101722;--wh-stat-grid: #2b3d56;--wh-stat-text-primary: #e7effb;--wh-stat-text-muted: #9fb3cd;--wh-stat-tooltip-bg: rgba(9, 14, 23, .96);--wh-stat-tooltip-border: rgba(180, 206, 239, .34);--wh-stat-panel-bg: #182333;--wh-stat-panel-bg-soft: #1a2638;--wh-stat-panel-border: #2d415d;--wh-stat-shadow: rgba(0, 0, 0, .34)}}.statistics-widget-root[data-theme=dark],[data-theme=dark] .statistics-widget-root,[theme=dark] .statistics-widget-root,.theme-dark .statistics-widget-root{--wh-stat-bg: #101722;--wh-stat-grid: #2b3d56;--wh-stat-text-primary: #e7effb;--wh-stat-text-muted: #9fb3cd;--wh-stat-tooltip-bg: rgba(9, 14, 23, .96);--wh-stat-tooltip-border: rgba(180, 206, 239, .34);--wh-stat-panel-bg: #182333;--wh-stat-panel-bg-soft: #1a2638;--wh-stat-panel-border: #2d415d;--wh-stat-shadow: rgba(0, 0, 0, .34)}.wh-dashboard{display:grid;grid-template-columns:repeat(2,minmax(280px,1fr));gap:18px}.wh-card{position:relative;border-radius:18px;border:1px solid color-mix(in srgb,var(--wh-stat-panel-border) 88%,var(--wh-stat-grid) 12%);background:radial-gradient(120% 110% at 0% 0%,rgba(54,162,235,.08),transparent 54%),linear-gradient(180deg,var(--wh-stat-panel-bg) 0%,var(--wh-stat-panel-bg-soft) 100%);box-shadow:0 14px 34px var(--wh-stat-shadow);padding:14px}.wh-card h3{margin:0 0 12px;color:var(--wh-stat-text-primary);font-size:15px;font-weight:700}.wh-card--wide{grid-column:span 2}.wh-canvas-wrap{position:relative;height:320px}canvas{display:block;width:100%;height:100%}.wh-stat-legend{display:flex;align-items:center;flex-wrap:wrap;gap:8px;margin-top:12px}.wh-stat-legend__item{border:1px solid color-mix(in srgb,#2f89ff 26%,var(--wh-stat-panel-border) 74%);background:color-mix(in srgb,var(--wh-stat-panel-bg) 86%,var(--wh-stat-panel-bg-soft) 14%);color:var(--wh-stat-text-primary);border-radius:999px;padding:6px 11px;font-size:12px;display:inline-flex;align-items:center;gap:7px;cursor:pointer;transition:transform .14s ease,opacity .14s ease,box-shadow .14s ease;box-shadow:0 8px 14px color-mix(in srgb,var(--wh-stat-shadow) 80%,transparent 20%)}.wh-stat-legend__item:hover{transform:translateY(-1px)}.wh-stat-legend__item--inactive{opacity:.5}.wh-stat-legend__dot{width:9px;height:9px;border-radius:999px;background:var(--wh-stat-legend-dot, #36a2eb);box-shadow:0 0 0 3px color-mix(in srgb,var(--wh-stat-legend-dot, #36a2eb) 25%,transparent 75%)}.wh-stat-tooltip{position:absolute;z-index:50;transform:translateY(-100%);min-width:150px;max-width:280px;border-radius:12px;border:1px solid var(--wh-stat-tooltip-border);background:var(--wh-stat-tooltip-bg);color:#f7fbff;padding:9px 11px;pointer-events:none;transition:opacity .1s ease;box-shadow:0 18px 38px #0000003d;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.wh-stat-tooltip__title{margin:0 0 6px;font-size:12px;font-weight:700}.wh-stat-tooltip__row{display:flex;align-items:center;justify-content:space-between;gap:10px;margin:3px 0;font-size:12px}.wh-stat-tooltip__row span{display:inline-flex;align-items:center;gap:6px}.wh-stat-tooltip__dot{width:8px;height:8px;border-radius:999px;background:var(--wh-stat-tooltip-dot, #36a2eb);box-shadow:0 0 0 3px color-mix(in srgb,var(--wh-stat-tooltip-dot, #36a2eb) 28%,transparent 72%)}@media(max-width:920px){.wh-dashboard{grid-template-columns:1fr}.wh-card--wide{grid-column:auto}.wh-canvas-wrap{height:280px}}@media(max-width:560px){.wh-card{border-radius:14px;padding:12px}.wh-canvas-wrap{height:240px}}")),document.head.appendChild(t)}}catch(a){console.error("vite-plugin-css-injected-by-js",a)}})();
var WebHackerStatistics=(function(D){"use strict";var le=Object.defineProperty;var de=(D,c,W)=>c in D?le(D,c,{enumerable:!0,configurable:!0,writable:!0,value:W}):D[c]=W;var y=(D,c,W)=>de(D,typeof c!="symbol"?c+"":c,W);const c=["#36A2EB","#FF6384","#FFCE56","#4BC0C0","#9966FF","#FF9F40","#8BC34A","#607D8B"],W={background:"--wh-stat-bg",grid:"--wh-stat-grid",textPrimary:"--wh-stat-text-primary",textMuted:"--wh-stat-text-muted",tooltipBackground:"--wh-stat-tooltip-bg",tooltipBorder:"--wh-stat-tooltip-border"},_={background:"#ffffff",grid:"#e6edf7",textPrimary:"#1f2d3d",textMuted:"#5f7389",tooltipBackground:"rgba(18, 27, 43, 0.94)",tooltipBorder:"rgba(255, 255, 255, 0.2)"},N={responsive:!0,animation:{duration:900},cutout:"58%",scales:{y:{beginAtZero:!0}},plugins:{legend:{display:!0},tooltip:{enabled:!0,valueFormatter:e=>Number.isFinite(e)?Intl.NumberFormat("ru-RU").format(e):String(e)}}};function Dt(e,t){const i=c[t%c.length],n=e==="line";return{label:`Dataset ${t+1}`,data:[],borderColor:i,backgroundColor:n?Wt(i,.2):i,borderWidth:2,pointRadius:3,tension:.35,fill:n,hidden:!1}}function Lt(e){var a,o,r,d,g,l,v,h,b,x,k,C,M;const t=(a=N.scales.y)==null?void 0:a.beginAtZero,i=(o=N.plugins.legend)==null?void 0:o.display,n=(r=N.plugins.tooltip)==null?void 0:r.enabled,s=((d=N.plugins.tooltip)==null?void 0:d.valueFormatter)??(S=>(Number.isFinite(S),String(S)));return{responsive:(e==null?void 0:e.responsive)??N.responsive,animation:{duration:((g=e==null?void 0:e.animation)==null?void 0:g.duration)??N.animation.duration},cutout:(e==null?void 0:e.cutout)??N.cutout,scales:{y:{beginAtZero:((v=(l=e==null?void 0:e.scales)==null?void 0:l.y)==null?void 0:v.beginAtZero)??t}},plugins:{legend:{display:((b=(h=e==null?void 0:e.plugins)==null?void 0:h.legend)==null?void 0:b.display)??i},tooltip:{enabled:((k=(x=e==null?void 0:e.plugins)==null?void 0:x.tooltip)==null?void 0:k.enabled)??n,valueFormatter:((M=(C=e==null?void 0:e.plugins)==null?void 0:C.tooltip)==null?void 0:M.valueFormatter)??s}}}}function gt(e){const t=Array.isArray(e.data.labels)?e.data.labels.map(n=>String(n)):[],i=Array.isArray(e.data.datasets)?e.data.datasets.map((n,s)=>{const a=Dt(e.type,s),o=Array.isArray(n.data)?n.data.map(r=>Number.isFinite(r)?Number(r):0):[];return{...a,...n,label:n.label??a.label,data:o,borderColor:n.borderColor??a.borderColor,backgroundColor:n.backgroundColor??a.backgroundColor,borderWidth:n.borderWidth??a.borderWidth,pointRadius:n.pointRadius??a.pointRadius,tension:n.tension??a.tension,fill:n.fill??a.fill,hidden:n.hidden??a.hidden}}):[];return{type:e.type,data:{labels:t,datasets:i},options:Lt(e.options)}}function Wt(e,t){if(!e.startsWith("#")||e.length!==7)return e;const i=Number.parseInt(e.slice(1,3),16),n=Number.parseInt(e.slice(3,5),16),s=Number.parseInt(e.slice(5,7),16);return`rgba(${i}, ${n}, ${s}, ${t})`}const Y=new WeakMap,X=new WeakMap;function R(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/'/g,"&#39;")}function Ft(e){const t=Y.get(e),i=e.closest(".wh-card")||e.closest(".card")||e.parentElement||e;if(t)return t.root.parentElement!==i&&i.appendChild(t.root),t.root;const n=document.createElement("div");n.className="wh-stat-legend",i.appendChild(n);const s={root:n,onToggle:()=>{}};return n.addEventListener("click",a=>{var r;const o=(r=a.target)==null?void 0:r.closest(".wh-stat-legend__item");o&&s.onToggle(o.dataset.legendId??"")}),Y.set(e,s),n}function ft(e,t,i,n){const s=Ft(e),a=Y.get(e);if(a){if(a.onToggle=i,s.style.display=n?"flex":"none",!n){s.innerHTML="";return}s.innerHTML=t.map(o=>`
                <button
                    type="button"
                    class="wh-stat-legend__item${o.active?"":" wh-stat-legend__item--inactive"}"
                    data-legend-id="${R(o.id)}"
                    title="${R(o.label)}"
                >
                    <span class="wh-stat-legend__dot" style="--wh-stat-legend-dot: ${R(o.color)}"></span>
                    <span>${R(o.label)}</span>
                </button>
            `).join("")}}function Ht(e){const t=X.get(e);if(t)return t;const i=e.parentElement??e;i instanceof HTMLElement&&getComputedStyle(i).position==="static"&&(i.style.position="relative");const n=document.createElement("div");return n.className="wh-stat-tooltip",n.style.opacity="0",i.appendChild(n),X.set(e,n),n}function Z(e,t,i,n,s){var g;const a=Ht(e),o=s.map(l=>`
                <div class="wh-stat-tooltip__row">
                    <span>${l.color?`<span class="wh-stat-tooltip__dot" style="--wh-stat-tooltip-dot:${R(l.color)}"></span>`:""}${R(l.label)}</span>
                    <strong>${R(l.value)}</strong>
                </div>
            `).join("");a.innerHTML=`
        <div class="wh-stat-tooltip__title">${R(n)}</div>
        ${o}
    `;const r=((g=e.parentElement)==null?void 0:g.clientWidth)??e.clientWidth,d=Math.max(12,Math.min(t,r-12));a.style.left=`${d}px`,a.style.top=`${Math.max(12,i)}px`,a.style.opacity="1"}function et(e){const t=X.get(e);t&&(t.style.opacity="0")}function Rt(e){const t=Y.get(e);t&&(t.root.remove(),Y.delete(e));const i=X.get(e);i&&(i.remove(),X.delete(e))}function z(e,t,i){return Math.max(t,Math.min(i,e))}function nt(e,t,i){return e+(t-e)*i}function Bt(e){return 1-Math.pow(1-e,3)}function $t(e,t){const i=e.x-t.x,n=e.y-t.y;return Math.sqrt(i*i+n*n)}function Nt(e,t,i,n,s,a=8){const o=Math.max(0,Math.min(a,n/2,s/2));e.beginPath(),e.moveTo(t+o,i),e.lineTo(t+n-o,i),e.quadraticCurveTo(t+n,i,t+n,i+o),e.lineTo(t+n,i+s),e.lineTo(t,i+s),e.lineTo(t,i+o),e.quadraticCurveTo(t,i,t+o,i),e.closePath()}function mt(e,t,i){if(t.length===0||(e.moveTo(t[0].x,t[0].y),t.length===1))return;const n=z(i,0,1);for(let s=0;s<t.length-1;s+=1){const a=t[s],o=t[s+1],r=t[s-1]??a,d=t[s+2]??o,g=a.x+(o.x-r.x)/6*n,l=a.y+(o.y-r.y)/6*n,v=o.x-(d.x-a.x)/6*n,h=o.y-(d.y-a.y)/6*n;e.bezierCurveTo(g,l,v,h,o.x,o.y)}}function Vt(e){return structuredClone(e)}function O(e,t,i){const n=Array.isArray(t)?t:[t],s=getComputedStyle(e);for(let a=0;a<n.length;a+=1){const o=s.getPropertyValue(n[a]).trim();if(o)return o}return i}function _t(e){return{background:O(e,W.background,_.background),grid:O(e,W.grid,_.grid),textPrimary:O(e,W.textPrimary,_.textPrimary),textMuted:O(e,W.textMuted,_.textMuted),tooltipBackground:O(e,W.tooltipBackground,_.tooltipBackground),tooltipBorder:O(e,W.tooltipBorder,_.tooltipBorder)}}function B(e,t){if(e.startsWith("#")&&e.length===7){const i=Number.parseInt(e.slice(1,3),16),n=Number.parseInt(e.slice(3,5),16),s=Number.parseInt(e.slice(5,7),16);return`rgba(${i}, ${n}, ${s}, ${t})`}return e.startsWith("rgb(")?e.replace("rgb(","rgba(").replace(")",`, ${t})`):e}function V(e,t,i=0){return Array.isArray(e)?e[i]??t:typeof e=="string"?e:t}function it(e,t){const a=t-42;return{left:56,right:e-18,top:20,bottom:a,width:e-56-18,height:a-20}}function bt(e,t,i){e.strokeStyle=i,e.lineWidth=1;for(let n=0;n<=5;n+=1){const s=t.top+t.height/5*n;e.beginPath(),e.moveTo(t.left,s),e.lineTo(t.right,s),e.stroke()}}function q(e){const{context:t,area:i,valuesMin:n,valuesMax:s,labels:a,color:o,formatValue:r}=e;t.fillStyle=o,t.font='12px "Segoe UI", sans-serif',t.textAlign="right",t.textBaseline="middle";const d=(s-n)/5;for(let v=0;v<=5;v+=1){const h=i.bottom-i.height/5*v,b=n+d*v;t.fillText(r(b),i.left-8,h)}if(a.length===0)return;t.textAlign="center",t.textBaseline="top";const g=Math.max(2,Math.floor(i.width/70)),l=Math.max(1,Math.ceil(a.length/g));a.forEach((v,h)=>{const b=h===a.length-1;if(h%l!==0&&!b)return;const x=a.length===1?i.left+i.width/2:i.left+i.width/(a.length-1)*h;t.fillText(v,x,i.bottom+8)})}function pt(e,t){if(e.length===0)return{min:0,max:1};let i=Math.min(...e),n=Math.max(...e);return t&&(i=Math.min(0,i),n=Math.max(0,n)),i===n&&(n=i+1),{min:i,max:n}}function at(e,t,i,n){const s=(e-t)/(i-t);return n.bottom-s*n.height}function zt(e){var P,p,E;const{context:t,config:i,hiddenDatasets:n,progress:s,theme:a,hoverTarget:o,area:r,formatValue:d,drawEmptyState:g}=e,l=i.data.labels,h=i.data.datasets.map((L,w)=>({dataset:L,datasetIndex:w})).filter(({datasetIndex:L})=>!n.has(L));bt(t,r,a.grid);const b=h.flatMap(({dataset:L})=>L.data);if(b.length===0||l.length===0)return q({context:t,area:r,valuesMin:0,valuesMax:1,labels:l,color:a.textMuted,formatValue:d}),g(a.textMuted,"No data"),[];const x=((E=(p=(P=i.options)==null?void 0:P.scales)==null?void 0:p.y)==null?void 0:E.beginAtZero)??!0,{min:k,max:C}=pt(b,x);q({context:t,area:r,valuesMin:k,valuesMax:C,labels:l,color:a.textMuted,formatValue:d});const M=at(0,k,C,r),S=r.width/l.length,f=S*.16,I=Math.max(8,S-f*2),T=Math.max(1,h.length),m=I/T,u=[];return l.forEach((L,w)=>{h.forEach(({dataset:F,datasetIndex:A},H)=>{const J=F.data[w]??0,tt=at(J,k,C,r),ct=Math.min(M,tt),se=Math.max(M,tt),ht=nt(M,ct,s),oe=nt(M,se,s),It=Math.max(1,oe-ht),At=r.left+S*w+f+m*H+m*.12,Ct=Math.max(2,m*.76),ut=V(F.backgroundColor,c[H%c.length],w),re=(o==null?void 0:o.kind)==="bar"&&o.index===w&&o.datasetIndex===A;Nt(t,At,ht,Ct,It,7),t.fillStyle=ut,t.fill(),re&&(t.strokeStyle=B(ut,.45),t.lineWidth=2,t.stroke()),u.push({datasetIndex:A,pointIndex:w,x:At,y:ht,width:Ct,height:It,value:J,color:ut})})}),u}function Ot(e){const{x:t,y:i,barPoints:n}=e;for(let s=n.length-1;s>=0;s-=1){const a=n[s],o=t>=a.x&&t<=a.x+a.width,r=i>=a.y&&i<=a.y+a.height;if(o&&r)return{kind:"bar",index:a.pointIndex,datasetIndex:a.datasetIndex}}return null}function Yt(e){const{config:t,hiddenDatasets:i,pointIndex:n,formatValue:s}=e,a=t.data.labels[n]??`Item ${n+1}`,o=t.data.datasets.map((r,d)=>({dataset:r,datasetIndex:d})).filter(({datasetIndex:r})=>!i.has(r)).map(({dataset:r,datasetIndex:d},g)=>({label:r.label??`Dataset ${d+1}`,value:s(r.data[n]??0),color:V(r.backgroundColor,c[g%c.length],n)}));return{title:a,rows:o}}function vt(e,t){if(typeof e=="string"&&e.endsWith("%")){const i=Number.parseFloat(e.slice(0,-1));if(Number.isFinite(i))return z(i/100,0,.92)}return typeof e=="number"&&Number.isFinite(e)?e<=1?z(e,0,.92):z(e/t,0,.92):.58}function Xt(e){var I;const{context:t,config:i,canvasWidth:n,canvasHeight:s,hiddenSlices:a,progress:o,theme:r,hoverTarget:d,drawEmptyState:g}=e,l=i.data.datasets[0];if(!l||l.data.length===0)return g(r.textMuted,"No data"),[];const v=l.data,h=n/2,b=s/2,x=Math.min(n,s)*.36,k=vt((I=i.options)==null?void 0:I.cutout,x),C=x*k,M=v.reduce((T,m,u)=>a.has(u)?T:T+Math.max(0,m),0);if(M<=0)return g(r.textMuted,"No data"),[];let S=-Math.PI/2;const f=[];return v.forEach((T,m)=>{const u=Math.max(0,T);if(u<=0||a.has(m))return;const P=u/M*Math.PI*2,p=P*o,E=(d==null?void 0:d.kind)==="doughnut"&&d.index===m,L=V(l.backgroundColor,c[m%c.length],m),w=S+P/2,F=E?10:0,A=Math.cos(w)*F,H=Math.sin(w)*F;t.beginPath(),t.arc(h+A,b+H,x,S,S+p),t.arc(h+A,b+H,C,S+p,S,!0),t.closePath(),t.fillStyle=L,t.fill(),f.push({index:m,start:S,end:S+P,value:u,color:L}),S+=P}),t.beginPath(),t.arc(h,b,C,0,Math.PI*2),t.fillStyle=r.background,t.fill(),f}function Zt(e){const{x:t,y:i,canvasWidth:n,canvasHeight:s,cutout:a,slices:o}=e;if(o.length===0)return null;const r=n/2,d=s/2,g=Math.min(n,s)*.36,l=vt(a,g),v=g*l,h=t-r,b=i-d,x=Math.sqrt(h*h+b*b);if(x<v||x>g+10)return null;let k=Math.atan2(b,h);k<-Math.PI/2&&(k+=Math.PI*2);for(let C=0;C<o.length;C+=1){const M=o[C];if(k>=M.start&&k<=M.end)return{kind:"doughnut",index:M.index}}return null}function qt(e){const{config:t,hiddenSlices:i,index:n,formatValue:s}=e,a=t.data.datasets[0],o=t.data.labels,r=(a==null?void 0:a.data[n])??0,d=((a==null?void 0:a.data)??[]).reduce((v,h,b)=>i.has(b)?v:v+Math.max(0,h),0),g=d>0?Math.max(0,r)/d*100:0,l=V(a==null?void 0:a.backgroundColor,c[n%c.length],n);return{title:o[n]??`Slice ${n+1}`,rows:[{label:"Value",value:s(r),color:l},{label:"Share",value:`${g.toFixed(1)}%`}]}}function Ut(e){var I,T,m;const{context:t,config:i,hiddenDatasets:n,progress:s,theme:a,hoverTarget:o,area:r,formatValue:d,drawEmptyState:g}=e,l=i.data.labels,h=i.data.datasets.map((u,P)=>({dataset:u,datasetIndex:P})).filter(({datasetIndex:u})=>!n.has(u));bt(t,r,a.grid);const b=h.flatMap(({dataset:u})=>u.data);if(b.length===0||l.length===0)return q({context:t,area:r,valuesMin:0,valuesMax:1,labels:l,color:a.textMuted,formatValue:d}),g(a.textMuted,"No data"),[];const x=((m=(T=(I=i.options)==null?void 0:I.scales)==null?void 0:T.y)==null?void 0:m.beginAtZero)??!0,{min:k,max:C}=pt(b,x);q({context:t,area:r,valuesMin:k,valuesMax:C,labels:l,color:a.textMuted,formatValue:d});const M=(o==null?void 0:o.kind)==="line"?o.index:null,S=l.length===1?0:r.width/(l.length-1),f=[];if(h.forEach(({dataset:u,datasetIndex:P},p)=>{const E=u.borderColor??c[p%c.length],L=V(u.backgroundColor,B(E,.18)),w=[];for(let A=0;A<l.length;A+=1){const H=u.data[A]??0,J=l.length===1?r.left+r.width/2:r.left+S*A,tt=at(H,k,C,r),ct=nt(r.bottom,tt,s);w.push({datasetIndex:P,pointIndex:A,x:J,y:ct,value:H,color:E})}t.beginPath(),mt(t,w,u.tension??.35),u.fill&&(t.lineTo(w[w.length-1].x,r.bottom),t.lineTo(w[0].x,r.bottom),t.closePath(),t.fillStyle=L,t.fill(),t.beginPath(),mt(t,w,u.tension??.35)),t.strokeStyle=E,t.lineWidth=u.borderWidth??2,t.stroke();const F=u.pointRadius??3;w.forEach(A=>{const H=M===A.pointIndex;t.beginPath(),t.arc(A.x,A.y,H?F+2:F,0,Math.PI*2),t.fillStyle=E,t.fill(),H&&(t.beginPath(),t.arc(A.x,A.y,F+5,0,Math.PI*2),t.strokeStyle=B(E,.35),t.lineWidth=1.5,t.stroke())}),f.push(w)}),M!==null&&M>=0&&M<l.length){const u=l.length===1?r.left+r.width/2:r.left+S*M;t.setLineDash([4,4]),t.strokeStyle=B(a.textMuted,.45),t.beginPath(),t.moveTo(u,r.top),t.lineTo(u,r.bottom),t.stroke(),t.setLineDash([])}return f}function jt(e){const{x:t,y:i,area:n,labels:s}=e;if(t<n.left-8||t>n.right+8||i<n.top-8||i>n.bottom+8||s.length===0)return null;const a=s.length===1?0:n.width/(s.length-1),o=s.length===1?0:Math.round((t-n.left)/Math.max(1,a));return{kind:"line",index:z(o,0,s.length-1)}}function Gt(e){const{config:t,hiddenDatasets:i,hoverIndex:n,formatValue:s}=e,a=t.data.labels[n]??`Point ${n+1}`,o=t.data.datasets.map((r,d)=>({dataset:r,datasetIndex:d})).filter(({datasetIndex:r})=>!i.has(r)).map(({dataset:r,datasetIndex:d},g)=>({label:r.label??`Dataset ${d+1}`,value:s(r.data[n]??0),color:r.borderColor??c[g%c.length]}));return{title:a,rows:o}}function Kt(e){const{context:t,config:i,canvasWidth:n,canvasHeight:s,hiddenDatasets:a,progress:o,theme:r,hoverTarget:d,drawEmptyState:g}=e,l=i.data.labels,v=i.data.datasets.map((f,I)=>({dataset:f,datasetIndex:I})).filter(({datasetIndex:f})=>!a.has(f));if(l.length<3||v.length===0)return g(r.textMuted,"No data"),[];const h=n/2,b=s/2,x=Math.min(n,s)*.34,k=5,C=v.flatMap(({dataset:f})=>f.data),M=Math.max(1,...C.map(f=>Math.max(0,f)));t.strokeStyle=r.grid,t.lineWidth=1;for(let f=1;f<=k;f+=1){const I=x/k*f;t.beginPath();for(let T=0;T<l.length;T+=1){const m=-Math.PI/2+Math.PI*2*T/l.length,u=h+Math.cos(m)*I,P=b+Math.sin(m)*I;T===0?t.moveTo(u,P):t.lineTo(u,P)}t.closePath(),t.stroke()}for(let f=0;f<l.length;f+=1){const I=-Math.PI/2+Math.PI*2*f/l.length,T=Math.cos(I),m=Math.sin(I),u=h+T*(x+16),P=b+m*(x+16),p=T>.3?6:T<-.3?-6:0,E=m>.3?3:m<-.3?-3:0;t.fillStyle=r.textMuted,t.font='12px "Segoe UI", sans-serif',t.textAlign=T>.3?"left":T<-.3?"right":"center",t.textBaseline=m>.3?"top":m<-.3?"bottom":"middle",t.fillText(l[f]??`Item ${f+1}`,u+p,P+E),t.strokeStyle=r.grid,t.beginPath(),t.moveTo(h,b),t.lineTo(h+Math.cos(I)*x,b+Math.sin(I)*x),t.stroke()}const S=[];return v.forEach(({dataset:f,datasetIndex:I},T)=>{const m=f.borderColor??c[T%c.length],u=V(f.backgroundColor,B(m,.16)),P=[];for(let p=0;p<l.length;p+=1){const E=Math.max(0,f.data[p]??0),L=-Math.PI/2+Math.PI*2*p/l.length,w=E/M*x*o,F=h+Math.cos(L)*w,A=b+Math.sin(L)*w;P.push({datasetIndex:I,pointIndex:p,x:F,y:A,value:E,color:m})}t.beginPath(),P.forEach((p,E)=>{E===0?t.moveTo(p.x,p.y):t.lineTo(p.x,p.y)}),t.closePath(),t.fillStyle=u,t.fill(),t.strokeStyle=m,t.lineWidth=f.borderWidth??2,t.stroke(),P.forEach(p=>{const E=(d==null?void 0:d.kind)==="radar"&&d.index===p.pointIndex&&d.datasetIndex===p.datasetIndex;t.beginPath(),t.arc(p.x,p.y,E?6:4.5,0,Math.PI*2),t.fillStyle=m,t.fill(),E&&(t.beginPath(),t.arc(p.x,p.y,9,0,Math.PI*2),t.strokeStyle=B(m,.32),t.lineWidth=1.5,t.stroke())}),S.push(...P)}),S}function Qt(e){const{x:t,y:i,radarPoints:n}=e;let s=Number.POSITIVE_INFINITY,a=null;for(let o=0;o<n.length;o+=1){const r=n[o],d=$t({x:t,y:i},{x:r.x,y:r.y});d<s&&d<=14&&(s=d,a=r)}return a?{kind:"radar",index:a.pointIndex,datasetIndex:a.datasetIndex}:null}function Jt(e){const{config:t,index:i,datasetIndex:n,formatValue:s}=e,a=t.data.datasets[n],o=(a==null?void 0:a.borderColor)??c[n%c.length];return{title:t.data.labels[i]??`Point ${i+1}`,rows:[{label:(a==null?void 0:a.label)??`Dataset ${n+1}`,value:s((a==null?void 0:a.data[i])??0),color:o}]}}const st=new WeakMap,U=new Set,yt=["class","style","data-theme","theme"];let j=null,ot=null,G=null,rt=null;class ${constructor(t,i){y(this,"canvas");y(this,"context");y(this,"config");y(this,"animationProgress",1);y(this,"animationFrameId",null);y(this,"animationStart",0);y(this,"animationDuration",900);y(this,"destroyed",!1);y(this,"dpr",1);y(this,"canvasWidth",0);y(this,"canvasHeight",0);y(this,"linePoints",[]);y(this,"barPoints",[]);y(this,"doughnutSlices",[]);y(this,"radarPoints",[]);y(this,"hoverTarget",null);y(this,"pointerX",0);y(this,"pointerY",0);y(this,"hiddenDatasets",new Set);y(this,"hiddenSlices",new Set);y(this,"onMouseMoveBound",t=>{this.onMouseMove(t)});y(this,"onMouseLeaveBound",()=>{this.onMouseLeave()});y(this,"onResizeBound",()=>{this.resize()});y(this,"resizeObserver",null);var n,s;if(t instanceof HTMLCanvasElement){this.canvas=t;const a=t.getContext("2d");if(!a)throw new Error("Cannot initialize statistic: 2D context is not available.");this.context=a}else this.context=t,this.canvas=t.canvas;this.config=gt(i),this.syncHiddenState(),this.bindEvents(),this.installResizeHandling(),this.resizeCanvas(),this.startAnimation((s=(n=this.config.options)==null?void 0:n.animation)==null?void 0:s.duration),st.set(this.canvas,this),U.add(this),$.ensureThemeTracking()}update(t){var i,n;if(!this.destroyed){if(t){const s=this.config.type;this.config=gt(t),this.syncHiddenState(s!==this.config.type)}this.startAnimation((n=(i=this.config.options)==null?void 0:i.animation)==null?void 0:n.duration)}}resize(){this.destroyed||(this.resizeCanvas(),this.draw(this.animationProgress))}destroy(){this.destroyed||(this.destroyed=!0,this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null),this.canvas.removeEventListener("mousemove",this.onMouseMoveBound),this.canvas.removeEventListener("mouseleave",this.onMouseLeaveBound),window.removeEventListener("resize",this.onResizeBound),this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),Rt(this.canvas),st.delete(this.canvas),U.delete(this))}getConfig(){return Vt(this.config)}static getStatistic(t){return st.get(t)}static destroyAll(){Array.from(U).forEach(t=>t.destroy())}static refreshAllTheme(){Array.from(U).forEach(t=>t.redrawForTheme())}static ensureThemeTracking(){if(j||typeof window>"u")return;const t=()=>{ot===null&&(ot=requestAnimationFrame(()=>{ot=null,$.refreshAllTheme()}))};j=new MutationObserver(()=>{t()}),j.observe(document.documentElement,{attributes:!0,attributeFilter:yt}),document.body&&j.observe(document.body,{attributes:!0,attributeFilter:yt}),typeof window.matchMedia=="function"&&(G=window.matchMedia("(prefers-color-scheme: dark)"),rt=()=>{t()},typeof G.addEventListener=="function"?G.addEventListener("change",rt):G.addListener(rt))}redrawForTheme(){this.destroyed||this.draw(this.animationProgress||1)}bindEvents(){this.canvas.addEventListener("mousemove",this.onMouseMoveBound),this.canvas.addEventListener("mouseleave",this.onMouseLeaveBound)}installResizeHandling(){const t=this.canvas.parentElement;if(typeof ResizeObserver<"u"&&t){this.resizeObserver=new ResizeObserver(()=>{this.resize()}),this.resizeObserver.observe(t);return}window.addEventListener("resize",this.onResizeBound)}syncHiddenState(t=!1){var a;t&&(this.hiddenDatasets.clear(),this.hiddenSlices.clear());const i=new Set;if(this.config.data.datasets.forEach((o,r)=>{(o.hidden||this.hiddenDatasets.has(r))&&i.add(r)}),this.hiddenDatasets.clear(),i.forEach(o=>this.hiddenDatasets.add(o)),this.config.type!=="doughnut"){this.hiddenSlices.clear();return}const n=((a=this.config.data.datasets[0])==null?void 0:a.data)??[],s=new Set;n.forEach((o,r)=>{this.hiddenSlices.has(r)&&s.add(r)}),this.hiddenSlices.clear(),s.forEach(o=>this.hiddenSlices.add(o))}startAnimation(t){if(this.animationDuration=Math.max(0,t??900),this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null),this.animationDuration===0){this.animationProgress=1,this.draw(1);return}this.animationStart=performance.now(),this.animationProgress=0;const i=n=>{if(this.destroyed)return;const s=n-this.animationStart,a=z(s/this.animationDuration,0,1);if(this.animationProgress=Bt(a),this.draw(this.animationProgress),a<1){this.animationFrameId=requestAnimationFrame(i);return}this.animationFrameId=null};this.animationFrameId=requestAnimationFrame(i)}resizeCanvas(){var o,r;this.dpr=window.devicePixelRatio||1;const t=this.canvas.getBoundingClientRect(),i=((o=this.canvas.parentElement)==null?void 0:o.clientWidth)??640,n=((r=this.canvas.parentElement)==null?void 0:r.clientHeight)??320,s=Math.max(280,Math.round(t.width||i)),a=Math.max(220,Math.round(t.height||n));this.canvasWidth=s,this.canvasHeight=a,this.canvas.width=Math.round(s*this.dpr),this.canvas.height=Math.round(a*this.dpr),this.context.setTransform(this.dpr,0,0,this.dpr,0,0)}draw(t){const i=this.canvas.closest(".statistics-widget-root")??document.documentElement,n=_t(i);switch(this.context.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.context.fillStyle=n.background,this.context.fillRect(0,0,this.canvasWidth,this.canvasHeight),this.linePoints=[],this.barPoints=[],this.doughnutSlices=[],this.radarPoints=[],this.config.type){case"line":{this.linePoints=Ut({context:this.context,config:this.config,canvasWidth:this.canvasWidth,canvasHeight:this.canvasHeight,hiddenDatasets:this.hiddenDatasets,hiddenSlices:this.hiddenSlices,progress:t,formatValue:s=>this.formatValue(s),drawEmptyState:(s,a)=>this.drawEmptyState(s,a),theme:n,hoverTarget:this.hoverTarget,area:it(this.canvasWidth,this.canvasHeight)});break}case"bar":{this.barPoints=zt({context:this.context,config:this.config,canvasWidth:this.canvasWidth,canvasHeight:this.canvasHeight,hiddenDatasets:this.hiddenDatasets,hiddenSlices:this.hiddenSlices,progress:t,formatValue:s=>this.formatValue(s),drawEmptyState:(s,a)=>this.drawEmptyState(s,a),theme:n,hoverTarget:this.hoverTarget,area:it(this.canvasWidth,this.canvasHeight)});break}case"doughnut":{this.doughnutSlices=Xt({context:this.context,config:this.config,canvasWidth:this.canvasWidth,canvasHeight:this.canvasHeight,hiddenDatasets:this.hiddenDatasets,hiddenSlices:this.hiddenSlices,progress:t,drawEmptyState:(s,a)=>this.drawEmptyState(s,a),theme:n,hoverTarget:this.hoverTarget});break}case"radar":{this.radarPoints=Kt({context:this.context,config:this.config,canvasWidth:this.canvasWidth,canvasHeight:this.canvasHeight,hiddenDatasets:this.hiddenDatasets,hiddenSlices:this.hiddenSlices,progress:t,drawEmptyState:(s,a)=>this.drawEmptyState(s,a),theme:n,hoverTarget:this.hoverTarget});break}default:this.drawEmptyState(n.textMuted,"Unsupported statistic type")}this.renderLegend(),this.renderTooltip()}drawEmptyState(t,i){this.context.fillStyle=t,this.context.font='14px "Segoe UI", sans-serif',this.context.textAlign="center",this.context.textBaseline="middle",this.context.fillText(i,this.canvasWidth/2,this.canvasHeight/2)}renderLegend(){var n,s,a;const t=((a=(s=(n=this.config.options)==null?void 0:n.plugins)==null?void 0:s.legend)==null?void 0:a.display)??!0;if(this.config.type==="doughnut"){const o=this.config.data.datasets[0],r=this.config.data.labels,d=((o==null?void 0:o.data)??[]).map((g,l)=>({id:String(l),label:r[l]??`Item ${l+1}`,color:V(o==null?void 0:o.backgroundColor,c[l%c.length],l),active:!this.hiddenSlices.has(l)}));ft(this.canvas,d,g=>{const l=Number(g);Number.isFinite(l)&&(this.hiddenSlices.has(l)?this.hiddenSlices.delete(l):this.hiddenSlices.add(l),this.startAnimation(380))},t);return}const i=this.config.data.datasets.map((o,r)=>({id:String(r),label:o.label??`Dataset ${r+1}`,color:o.borderColor??c[r%c.length],active:!this.hiddenDatasets.has(r)}));ft(this.canvas,i,o=>{const r=Number(o);Number.isFinite(r)&&(this.hiddenDatasets.has(r)?this.hiddenDatasets.delete(r):this.hiddenDatasets.add(r),this.startAnimation(380))},t)}onMouseMove(t){const i=this.canvas.getBoundingClientRect();this.pointerX=t.clientX-i.left,this.pointerY=t.clientY-i.top,this.hoverTarget=this.hitTest(this.pointerX,this.pointerY),this.canvas.style.cursor=this.hoverTarget?"pointer":"default",this.draw(this.animationProgress)}onMouseLeave(){this.hoverTarget=null,this.canvas.style.cursor="default",et(this.canvas),this.draw(this.animationProgress)}hitTest(t,i){var n;switch(this.config.type){case"line":return jt({x:t,y:i,area:it(this.canvasWidth,this.canvasHeight),labels:this.config.data.labels});case"bar":return Ot({x:t,y:i,barPoints:this.barPoints});case"doughnut":return Zt({x:t,y:i,canvasWidth:this.canvasWidth,canvasHeight:this.canvasHeight,cutout:(n=this.config.options)==null?void 0:n.cutout,slices:this.doughnutSlices});case"radar":return Qt({x:t,y:i,radarPoints:this.radarPoints});default:return null}}renderTooltip(){var i,n,s;if(!(((s=(n=(i=this.config.options)==null?void 0:i.plugins)==null?void 0:n.tooltip)==null?void 0:s.enabled)??!0)||!this.hoverTarget){et(this.canvas);return}if(this.hoverTarget.kind==="line"){const a=Gt({config:this.config,hiddenDatasets:this.hiddenDatasets,hoverIndex:this.hoverTarget.index,formatValue:o=>this.formatValue(o)});Z(this.canvas,this.pointerX+14,this.pointerY-8,a.title,a.rows);return}if(this.hoverTarget.kind==="bar"){const a=Yt({config:this.config,hiddenDatasets:this.hiddenDatasets,pointIndex:this.hoverTarget.index,formatValue:o=>this.formatValue(o)});Z(this.canvas,this.pointerX+14,this.pointerY-8,a.title,a.rows);return}if(this.hoverTarget.kind==="doughnut"){const a=qt({config:this.config,hiddenSlices:this.hiddenSlices,index:this.hoverTarget.index,formatValue:o=>this.formatValue(o)});Z(this.canvas,this.pointerX+14,this.pointerY-8,a.title,a.rows);return}if(this.hoverTarget.kind==="radar"){const a=Jt({config:this.config,index:this.hoverTarget.index,datasetIndex:this.hoverTarget.datasetIndex,formatValue:o=>this.formatValue(o)});Z(this.canvas,this.pointerX+14,this.pointerY-8,a.title,a.rows);return}et(this.canvas)}formatValue(t){var n,s,a;const i=(a=(s=(n=this.config.options)==null?void 0:n.plugins)==null?void 0:s.tooltip)==null?void 0:a.valueFormatter;return i?i(t):String(t)}}function lt(e){return $.getStatistic(e)}function te(){$.destroyAll()}const K=new Set;function dt(e){return{valueFormatter:t=>e?`${e}: ${Math.round(t)}`:String(Math.round(t))}}function Q(e,t,i=!1){const n=lt(e);n?n.update(t):new $(e,t),i&&K.add(e)}function ee(e){var t;return{type:"line",data:{labels:e.labels,datasets:e.series.map((i,n)=>{const s=i.color??c[n%c.length];return{label:i.label,data:i.values,borderColor:s,backgroundColor:B(s,.18),fill:!0,tension:.35,pointRadius:3}})},options:{plugins:{legend:{display:((t=e.options)==null?void 0:t.enableLegend)!==!1}}}}}function ne(e){var t,i,n;return{type:"bar",data:{labels:e.labels,datasets:[{label:((t=e.options)==null?void 0:t.valueLabel)??"Value",data:e.values,backgroundColor:e.colors&&e.colors.length>0?e.colors:e.values.map((s,a)=>c[a%c.length]),borderColor:"#1f6fff",borderWidth:0,fill:!1}]},options:{plugins:{legend:{display:((i=e.options)==null?void 0:i.enableLegend)!==!1},tooltip:dt((n=e.options)==null?void 0:n.valueLabel)}}}}function ie(e){var t,i,n;return{type:"doughnut",data:{labels:e.labels&&e.labels.length>0?e.labels:e.values.map((s,a)=>`Item ${a+1}`),datasets:[{label:((t=e.options)==null?void 0:t.valueLabel)??"Value",data:e.values,backgroundColor:e.colors&&e.colors.length>0?e.colors:e.values.map((s,a)=>c[a%c.length]),borderWidth:0,fill:!1}]},options:{cutout:`${Math.round((e.cutoutRatio??.58)*100)}%`,plugins:{legend:{display:((i=e.options)==null?void 0:i.enableLegend)!==!1},tooltip:dt((n=e.options)==null?void 0:n.valueLabel)}}}}function ae(e){var i,n,s;const t=((i=e.colors)==null?void 0:i[0])??c[0];return{type:"radar",data:{labels:e.labels,datasets:[{label:((n=e.options)==null?void 0:n.valueLabel)??"Value",data:e.values,borderColor:t,backgroundColor:B(t,.2),borderWidth:2,pointRadius:3,fill:!0}]},options:{plugins:{legend:{display:!1},tooltip:dt((s=e.options)==null?void 0:s.valueLabel)}}}}function xt(e){Q(e.canvasElement,ee(e),!0)}function Mt(e){Q(e.canvasElement,ne(e),!0)}function St(e){Q(e.canvasElement,ie(e),!0)}function Tt(e){Q(e.canvasElement,ae(e),!0)}function wt(){K.forEach(e=>{var t;(t=lt(e))==null||t.update()})}function Pt(e){var t;(t=lt(e))==null||t.destroy(),K.delete(e)}function Et(){te(),K.clear()}const kt={Statistic:$,renderLine:xt,renderBar:Mt,renderDoughnut:St,renderRadar:Tt,refresh:wt,destroy:Pt,destroyAll:Et};return typeof window<"u"&&(window.WebHackerStatistics=kt),D.Statistic=$,D.destroy=Pt,D.destroyAll=Et,D.refresh=wt,D.renderBar=Mt,D.renderDoughnut=St,D.renderLine=xt,D.renderRadar=Tt,D.widgetApi=kt,Object.defineProperty(D,Symbol.toStringTag,{value:"Module"}),D})({});

(function(){"use strict";try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode('.period-selector{display:flex;align-items:center;gap:8px;flex-wrap:wrap}.period-selector .chip{border:1px solid #d3e0f2;border-radius:999px;background:linear-gradient(180deg,#fff,#f8fbff);color:#35506f;padding:7px 14px;cursor:pointer;transition:all .2s ease;box-shadow:0 2px 6px #1e36560f}.period-selector .chip:hover{transform:translateY(-1px);box-shadow:0 5px 12px #1e36561f}.period-selector .chip.active{border-color:#2d93df;color:#2d93df;background:linear-gradient(180deg,#f5fbff,#edf7ff)}.grid{display:grid;grid-template-columns:repeat(2,minmax(280px,1fr));gap:16px}.card{position:relative;overflow:hidden;background:linear-gradient(180deg,#fffffff5,#f7fbfff5);border:1px solid var(--statistics-panel-border, #dbe7f5);border-radius:16px;padding:14px;box-shadow:0 10px 28px #152a4614;transition:transform .18s ease,box-shadow .18s ease}.card:before{content:"";position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none;background:radial-gradient(circle at 10% 0%,rgba(45,156,219,.08),transparent 46%)}.card:hover{transform:translateY(-2px);box-shadow:0 16px 36px #152a461f}.card h3{margin:0 0 12px;color:var(--statistics-text-primary, #1d3048);font-size:16px;font-weight:700;position:relative;z-index:1}.wide{grid-column:span 2}.canvas-wrap{height:320px;position:relative;z-index:1}canvas{display:block;width:100%;height:100%}.statistics-tooltip{position:absolute;z-index:50;min-width:146px;max-width:260px;padding:8px 10px;border-radius:12px;border:1px solid rgba(21,42,70,.12);background:#fffffff2;box-shadow:0 16px 36px #152a462e;-webkit-backdrop-filter:blur(7px);backdrop-filter:blur(7px);transform:translateY(-100%);pointer-events:none;transition:opacity .12s ease;color:var(--statistics-text-primary, #1d3048)}.statistics-tooltip__title{margin:0 0 6px;font-size:12px;line-height:1.2;font-weight:700}.statistics-tooltip__row{display:flex;align-items:center;justify-content:space-between;gap:10px;margin:3px 0;font-size:12px;color:var(--statistics-text-secondary, #56708f)}.statistics-tooltip__row span{display:inline-flex;align-items:center;gap:6px}.statistics-tooltip__dot{width:8px;height:8px;border-radius:999px;background:var(--statistics-tooltip-dot-color, #2d9cdb);box-shadow:0 0 0 3px #2d9cdb26}.statistics-tooltip__row strong{color:var(--statistics-text-primary, #1d3048);font-weight:700}.statistics-legend{position:relative;z-index:1;margin-top:12px;display:flex;align-items:center;gap:9px;flex-wrap:wrap}.statistics-legend__item{border:1px solid rgba(45,156,219,.24);background:linear-gradient(180deg,#fffffff2,#f7fbffe0);border-radius:999px;padding:6px 11px;color:var(--statistics-text-primary, #1d3048);display:inline-flex;align-items:center;gap:7px;cursor:pointer;font-size:12px;line-height:1;box-shadow:0 6px 14px #152a4614;transition:transform .16s ease,background-color .16s ease,opacity .16s ease,box-shadow .16s ease}.statistics-legend__item:hover{transform:translateY(-1px);background:linear-gradient(180deg,#fffffffa,#f0f8ffeb);box-shadow:0 9px 18px #152a461f}.statistics-legend__item--inactive{opacity:.54}.statistics-legend__item--inactive span{text-decoration:line-through}.statistics-legend__dot{width:9px;height:9px;border-radius:999px;background:var(--statistics-legend-dot-color, #2d9cdb);box-shadow:0 0 0 3px #2d9cdb1f}@media(max-width:900px){.grid{grid-template-columns:1fr}.wide{grid-column:auto}.canvas-wrap{height:280px}.statistics-legend__item{font-size:11px;padding:6px 10px}}@media(max-width:560px){body{padding:12px}.card{padding:12px;border-radius:14px}.card h3{font-size:15px}.canvas-wrap{height:240px}}')),document.head.appendChild(t)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();
var WebHackerStatistics=(function(V){"use strict";const P={panelBackground:"--statistics-panel-background",panelBorder:"--statistics-panel-border",textPrimary:"--statistics-text-primary",textSecondary:"--statistics-text-secondary",lineJoin:"--statistics-line-join",lineLeave:"--statistics-line-leave",success:"--statistics-success",danger:"--statistics-danger",grid:"--statistics-grid",doughnutHoleBackground:"--statistics-doughnut-hole-background"},C={panelBackground:"#ffffff",panelBorder:"#dbe7f5",textPrimary:"#1d3048",textSecondary:"#667e9a",lineJoin:"#28a745",lineLeave:"#e74c3c",success:"#28a745",danger:"#e74c3c",grid:"#e3ecf8",doughnutHoleBackground:"#edf3fa"};function _(t,i){return getComputedStyle(document.documentElement).getPropertyValue(t).trim()||i}function $(t,i=.2){if(t.startsWith("#")&&t.length===7){const n=Number.parseInt(t.slice(1,3),16),e=Number.parseInt(t.slice(3,5),16),o=Number.parseInt(t.slice(5,7),16);return`rgba(${n}, ${e}, ${o}, ${i})`}return t.startsWith("rgb(")?t.replace("rgb(","rgba(").replace(")",`, ${i})`):t}function et(){return{panelBackground:_(P.panelBackground,C.panelBackground),panelBorder:_(P.panelBorder,C.panelBorder),textPrimary:_(P.textPrimary,C.textPrimary),textSecondary:_(P.textSecondary,C.textSecondary),lineJoin:_(P.lineJoin,C.lineJoin),lineLeave:_(P.lineLeave,C.lineLeave),success:_(P.success,C.success),danger:_(P.danger,C.danger),grid:_(P.grid,C.grid),doughnutHoleBackground:_(P.doughnutHoleBackground,C.doughnutHoleBackground),palette:["#4caf50","#2196f3","#ff9800","#9c27b0","#ffc107","#00bcd4","#6a5acd","#ff5722","#2ecc71","#e91e63"]}}const z=new Map;function T({animationKey:t,durationMs:i=700,onUpdate:n}){const e=z.get(t);typeof e=="number"&&(cancelAnimationFrame(e),z.delete(t));const o=performance.now(),s=l=>{const u=l-o,b=Math.min(u/i,1),g=1-Math.pow(1-b,3);if(n(g),b<1){const d=requestAnimationFrame(s);z.set(t,d);return}z.delete(t)},r=requestAnimationFrame(s);z.set(t,r)}function R(t,i=280){const n=t.getContext("2d");if(!n)return null;const e=window.devicePixelRatio||1,o=Math.max(280,Math.floor(t.clientWidth)),s=Math.max(i,Math.floor(t.clientHeight));return t.width=Math.floor(o*e),t.height=Math.floor(s*e),n.setTransform(e,0,0,e,0,0),{width:o,height:s,context:n}}function Y(t,i,n,e){t.clearRect(0,0,i,n),t.fillStyle=e,t.fillRect(0,0,i,n)}const Q=new WeakMap;function rt(t){const i=Q.get(t);if(i)return i;const n=t.parentElement;if(!n)return null;getComputedStyle(n).position==="static"&&(n.style.position="relative");const e=document.createElement("div");return e.className="statistics-tooltip",e.style.opacity="0",n.appendChild(e),Q.set(t,e),e}function X(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/'/g,"&#39;")}function q(t,i){const n=i.map(e=>`
                <div class="statistics-tooltip__row">
                    <span>${e.accentColor?`<i class="statistics-tooltip__dot" style="--statistics-tooltip-dot-color: ${X(e.accentColor)}"></i>`:""}${X(e.label)}</span>
                    <strong>${X(e.value)}</strong>
                </div>
            `).join("");return`
        <div class="statistics-tooltip__title">${X(t)}</div>
        ${n}
    `}function U(t,i,n,e){const o=rt(t);o&&(o.innerHTML=e,o.style.left=`${i}px`,o.style.top=`${n}px`,o.style.opacity="1")}function L(t){const i=Q.get(t);i&&(i.style.opacity="0")}const j=new WeakMap;function F(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/'/g,"&#39;")}function lt(t){const i=t.parentElement;return i?i.closest(".card")||i:null}function ct(t){const i=j.get(t);if(i)return i.legendElement;const n=lt(t);if(!n)return null;const e=document.createElement("div");e.className="statistics-legend",n.appendChild(e);const o={legendElement:e,onToggle:()=>{}};return e.addEventListener("click",s=>{var l;const r=(l=s.target)==null?void 0:l.closest(".statistics-legend__item");r&&o.onToggle(r.dataset.identifier||"")}),j.set(t,o),e}function Z(t,i,n){const e=ct(t);if(!e)return;const o=j.get(t);o&&(o.onToggle=n,e.innerHTML=i.map(s=>`
                <button
                    type="button"
                    class="statistics-legend__item${s.isActive?"":" statistics-legend__item--inactive"}"
                    data-identifier="${F(s.identifier)}"
                    title="${F(s.label)}"
                >
                    <i class="statistics-legend__dot" style="--statistics-legend-dot-color: ${F(s.color)}"></i>
                    <span>${F(s.label)}</span>
                </button>
            `).join(""))}function D(t){const i=j.get(t);i&&(i.legendElement.innerHTML="")}const A=new WeakMap;function J(t){const i=A.get(t);if(!i)return;const n=R(t,300);if(!n)return;const{context:e,width:o,height:s}=n;Y(e,o,s,i.theme.panelBackground);const r=40,l=16,u=16,b=38,g=o-r-l,d=s-u-b,f=i.series.filter(c=>c.visibility>.02),a=f.flatMap(c=>c.values),x=Math.max(...a,1),m=g/Math.max(i.labels.length-1,1);e.strokeStyle=i.theme.grid,e.lineWidth=1;for(let c=0;c<=4;c+=1){const y=u+d/4*c;e.beginPath(),e.moveTo(r,y),e.lineTo(o-l,y),e.stroke()}const p=new Map;if(f.forEach(c=>{const y=c.values.map((h,M)=>{const I=r+m*M,v=Math.max(0,h*c.visibility)/x,B=u+d-v*d*i.progress;return{x:I,y:B}});e.beginPath(),y.forEach((h,M)=>{M===0?e.moveTo(h.x,h.y):e.lineTo(h.x,h.y)}),e.lineTo(r+m*(y.length-1),u+d),e.lineTo(r,u+d),e.closePath(),e.fillStyle=$(c.color,.15*c.visibility),e.fill(),e.beginPath(),y.forEach((h,M)=>{M===0?e.moveTo(h.x,h.y):e.lineTo(h.x,h.y)}),e.strokeStyle=c.color,e.lineWidth=2.6,e.globalAlpha=Math.max(.1,c.visibility),e.stroke(),e.globalAlpha=1,y.forEach((h,M)=>{const I=M===i.hoverIndex&&c.visibility>.5;e.beginPath(),e.arc(h.x,h.y,I?5.5:4,0,Math.PI*2),e.fillStyle=c.color,e.fill()}),p.set(c.identifier,y)}),i.hoverIndex!==null&&i.hoverIndex>=0&&i.hoverIndex<i.labels.length){const c=r+m*i.hoverIndex;e.strokeStyle=$(i.theme.textSecondary,.28),e.setLineDash([4,4]),e.beginPath(),e.moveTo(c,u),e.lineTo(c,u+d),e.stroke(),e.setLineDash([]),f.forEach(y=>{const h=p.get(y.identifier),M=h==null?void 0:h[i.hoverIndex??0];M&&(e.beginPath(),e.arc(M.x,M.y,8,0,Math.PI*2),e.strokeStyle=$(y.color,.45),e.lineWidth=1.5,e.stroke())})}e.fillStyle=i.theme.textSecondary,e.font='12px "Segoe UI", sans-serif',e.textAlign="center",i.labels.forEach((c,y)=>{e.fillText(c,r+m*y,s-12)}),i.legendEnabled?Z(t,i.series.map(c=>({identifier:c.identifier,label:c.label,color:c.color,isActive:c.visibility>.5})),c=>{const y=A.get(t);if(!y)return;const h=y.series.find(v=>v.identifier===c);if(!h)return;const M=h.visibility,I=M>.5?0:1;T({animationKey:`line-toggle:${t.id}:${h.identifier}`,durationMs:360,onUpdate(v){const B=A.get(t);if(!B)return;const W=B.series.find(G=>G.identifier===c);W&&(W.visibility=M+(I-M)*v,J(t),L(t))}})}):D(t)}function ut(t){const i=A.get(t);!i||i.initialized||(i.initialized=!0,t.addEventListener("mousemove",n=>{const e=A.get(t);if(!e||e.labels.length===0)return;const o=t.getBoundingClientRect(),s=40,u=(o.width-s-16)/Math.max(e.labels.length-1,1),b=n.clientX-o.left-s,g=Math.round(b/Math.max(u,1)),d=Math.max(0,Math.min(e.labels.length-1,g));e.hoverIndex=d,J(t);const f=e.series.filter(m=>m.visibility>.02);if(f.length===0){t.style.cursor="default",L(t);return}t.style.cursor="crosshair";const a=n.clientX-o.left,x=n.clientY-o.top;U(t,a+14,x-10,q(e.labels[d],f.map(m=>({label:m.label,value:Math.round((m.values[d]??0)*m.visibility),accentColor:m.color}))))}),t.addEventListener("mouseleave",()=>{const n=A.get(t);n&&(n.hoverIndex=null,J(t),t.style.cursor="default",L(t))}))}function dt(t,i,n,e,o){const s=A.get(t),r={labels:i,series:n.map(l=>{const u=s==null?void 0:s.series.find(b=>b.identifier===l.identifier);return{...l,visibility:(u==null?void 0:u.visibility)??1}}),theme:e,progress:0,hoverIndex:(s==null?void 0:s.hoverIndex)??null,initialized:(s==null?void 0:s.initialized)??!1,legendEnabled:(o==null?void 0:o.enableLegend)!==!1};A.set(t,r),ut(t),T({animationKey:`line:${t.id}`,durationMs:850,onUpdate(l){const u=A.get(t);u&&(u.progress=l,J(t))}})}const k=new WeakMap;function H(t,i){return Math.max(0,(t.values[i]??0)*(t.visibility[i]??1))}function O(t){const i=k.get(t);if(!i)return;const n=R(t,280);if(!n)return;const{context:e,width:o,height:s}=n;Y(e,o,s,i.theme.panelBackground);const r=i.values.reduce((f,a,x)=>f+H(i,x),0)||1,l=o/2,u=s/2,b=Math.min(o,s)*.36,g=b*i.cutoutRatio;let d=-Math.PI/2;i.values.forEach((f,a)=>{const x=H(i,a),m=x/r*Math.PI*2,p=m*i.progress,c=d+p,y=i.hoverIndex===a,h=d+p/2,M=y?8:0,I=Math.cos(h)*M,v=Math.sin(h)*M;x>0&&(e.beginPath(),e.arc(l+I,u+v,b,d,c),e.arc(l+I,u+v,g,c,d,!0),e.closePath(),e.fillStyle=i.colors[a]||"#cfd8e8",e.fill()),d+=m}),e.beginPath(),e.arc(l,u,g,0,Math.PI*2),e.fillStyle=i.theme.doughnutHoleBackground,e.fill(),i.legendEnabled?Z(t,i.values.map((f,a)=>({identifier:String(a),label:i.labels[a]||`Item ${a+1}`,color:i.colors[a]||"#cfd8e8",isActive:(i.visibility[a]??1)>.5})),f=>{const a=k.get(t);if(!a)return;const x=Number(f);if(!Number.isFinite(x))return;const m=a.visibility[x]??1,p=m>.5?0:1;T({animationKey:`doughnut-toggle:${t.id}:${x}`,durationMs:360,onUpdate(c){const y=k.get(t);y&&(y.visibility[x]=m+(p-m)*c,O(t),L(t))}})}):D(t)}function at(t,i,n){const e=k.get(t);if(!e)return null;const o=t.clientWidth,s=t.clientHeight,r=o/2,l=s/2,u=Math.min(o,s)*.36,b=u*e.cutoutRatio,g=i-r,d=n-l,f=Math.sqrt(g*g+d*d);if(f<b||f>u+12)return null;let a=Math.atan2(d,g)+Math.PI/2;a<0&&(a+=Math.PI*2);const x=e.values.reduce((p,c,y)=>p+H(e,y),0)||1;let m=0;for(let p=0;p<e.values.length;p+=1){const c=H(e,p);if(m+=c/x*Math.PI*2,a<=m&&c>0)return p}return null}function gt(t){const i=k.get(t);!i||i.initialized||(i.initialized=!0,t.addEventListener("mousemove",n=>{const e=k.get(t);if(!e)return;const o=t.getBoundingClientRect(),s=n.clientX-o.left,r=n.clientY-o.top,l=at(t,s,r);if(e.hoverIndex=l,O(t),l===null){t.style.cursor="default",L(t);return}t.style.cursor="pointer";const u=H(e,l),b=e.values.reduce((f,a,x)=>f+H(e,x),0)||1,g=(u/b*100).toFixed(1),d=e.labels[l]||`Item ${l+1}`;U(t,s+12,r-8,q(d,[{label:e.valueLabel,value:u,accentColor:e.colors[l]},{label:e.shareLabel,value:`${g}%`}]))}),t.addEventListener("mouseleave",()=>{const n=k.get(t);n&&(n.hoverIndex=null,O(t),t.style.cursor="default",L(t))}))}function it(t,i,n,e,o=.56,s=[],r){const l=k.get(t),u={values:i,colors:n,labels:s,visibility:i.map((b,g)=>(l==null?void 0:l.visibility[g])??1),theme:e,cutoutRatio:o,progress:0,hoverIndex:(l==null?void 0:l.hoverIndex)??null,initialized:(l==null?void 0:l.initialized)??!1,valueLabel:(r==null?void 0:r.valueLabel)||"Value",shareLabel:(r==null?void 0:r.shareLabel)||"Share",legendEnabled:(r==null?void 0:r.enableLegend)!==!1};k.set(t,u),gt(t),T({animationKey:`doughnut:${t.id}`,durationMs:900,onUpdate(b){const g=k.get(t);g&&(g.progress=b,O(t))}})}const S=new WeakMap;function nt(t,i){return Math.max(0,(t.values[i]??0)*(t.visibility[i]??1))}function K(t){const i=S.get(t);if(!i)return;const n=R(t,300);if(!n)return;const{context:e,width:o,height:s}=n;Y(e,o,s,i.theme.panelBackground);const r=24,l=12,u=14,b=38,g=o-r-l,d=s-u-b,f=Math.max(...i.values.map((p,c)=>nt(i,c)),1)||1,a=Math.min(64,g/Math.max(i.values.length*2,1)),x=i.values.length>1?(g-a*i.values.length)/(i.values.length-1):0;e.strokeStyle=i.theme.grid,e.lineWidth=1;for(let p=0;p<=5;p+=1){const c=u+d/5*p;e.beginPath(),e.moveTo(r,c),e.lineTo(o-l,c),e.stroke()}const m=[["#6a5acd","rgba(106,90,205,0.25)"],["#00bcd4","rgba(0,188,212,0.25)"],["#ff5722","rgba(255,87,34,0.25)"]];i.bars=[],i.values.forEach((p,c)=>{var W,G;const y=nt(i,c),h=r+c*(a+x),M=y/f*d*i.progress,I=u+(d-M),v=i.hoverIndex===c,B=e.createLinearGradient(0,I,0,u+d);B.addColorStop(0,((W=m[c])==null?void 0:W[0])||"#2d9cdb"),B.addColorStop(1,((G=m[c])==null?void 0:G[1])||"rgba(45,156,219,0.22)"),e.fillStyle=B,e.beginPath(),e.moveTo(h+8,I),e.lineTo(h+a-8,I),e.quadraticCurveTo(h+a,I,h+a,I+8),e.lineTo(h+a,I+M),e.lineTo(h,I+M),e.lineTo(h,I+8),e.quadraticCurveTo(h,I,h+8,I),e.closePath(),e.fill(),v&&y>0&&(e.strokeStyle=$(i.theme.textPrimary,.22),e.lineWidth=2,e.stroke()),i.bars.push({index:c,x:h,y:I,width:a,height:M})}),e.fillStyle=i.theme.textSecondary,e.font='12px "Segoe UI", sans-serif',e.textAlign="center",i.labels.forEach((p,c)=>{const y=r+c*(a+x)+a/2;e.fillText(p,y,s-12)}),i.legendEnabled?Z(t,i.labels.map((p,c)=>{var y;return{identifier:String(c),label:p,color:((y=m[c])==null?void 0:y[0])||"#2d9cdb",isActive:(i.visibility[c]??1)>.5}}),p=>{const c=S.get(t);if(!c)return;const y=Number(p);if(!Number.isFinite(y))return;const h=c.visibility[y]??1,M=h>.5?0:1;T({animationKey:`bar-toggle:${t.id}:${y}`,durationMs:340,onUpdate(I){const v=S.get(t);v&&(v.visibility[y]=h+(M-h)*I,K(t),L(t))}})}):D(t)}function ft(t,i,n){const e=S.get(t);if(!e)return null;for(let o=0;o<e.bars.length;o+=1){const s=e.bars[o];if(i>=s.x&&i<=s.x+s.width&&n>=s.y&&n<=s.y+s.height)return(e.visibility[s.index]??1)>.05?s.index:null}return null}function ht(t){const i=S.get(t);!i||i.initialized||(i.initialized=!0,t.addEventListener("mousemove",n=>{const e=S.get(t);if(!e)return;const o=t.getBoundingClientRect(),s=n.clientX-o.left,r=n.clientY-o.top,l=ft(t,s,r);if(e.hoverIndex=l,K(t),l===null){t.style.cursor="default",L(t);return}t.style.cursor="pointer",U(t,s+14,r-8,q(e.labels[l]||"Item",[{label:e.valueLabel,value:Math.round((e.values[l]??0)*(e.visibility[l]??1)),accentColor:"#2d9cdb"}]))}),t.addEventListener("mouseleave",()=>{const n=S.get(t);n&&(n.hoverIndex=null,K(t),t.style.cursor="default",L(t))}))}function bt(t,i,n,e,o){const s=S.get(t),r={labels:i,values:n,visibility:n.map((l,u)=>(s==null?void 0:s.visibility[u])??1),theme:e,progress:0,hoverIndex:(s==null?void 0:s.hoverIndex)??null,initialized:(s==null?void 0:s.initialized)??!1,bars:[],valueLabel:o==null?void 0:o.valueLabel,legendEnabled:(o==null?void 0:o.enableLegend)!==!1};S.set(t,r),ht(t),T({animationKey:`bar:${t.id}`,durationMs:820,onUpdate(l){const u=S.get(t);u&&(u.progress=l,K(t))}})}function yt(t){return Array.isArray(t)?t.map(i=>({date:typeof(i==null?void 0:i.date)=="string"?i.date:"",join:Number(i==null?void 0:i.join)||0,leave:Number(i==null?void 0:i.leave)||0})):[]}function pt(t){return{text:Number(t==null?void 0:t.text)||0,video:Number(t==null?void 0:t.video)||0,test:Number(t==null?void 0:t.test)||0,blank:Number(t==null?void 0:t.blank)||0,matching:Number(t==null?void 0:t.matching)||0}}function mt(t){return{modules:Number(t==null?void 0:t.modules)||0,lessons:Number(t==null?void 0:t.lessons)||0,steps:Number(t==null?void 0:t.steps)||0}}function xt(t){return{activityData:yt(t==null?void 0:t.activityData),stepTypeData:pt(t==null?void 0:t.stepTypeData),structure:mt(t==null?void 0:t.structure)}}function Mt(t){const i=new Date(`${t}T00:00`);return Number.isNaN(i.getTime())?t:i.toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit"})}function It(t,i){if(i==="all")return[...t].sort((o,s)=>o.date.getTime()-s.date.getTime());const n=Number(i)||7,e=new Date(new Date().setHours(0,0,0,0)-(n-1)*864e5);return t.filter(o=>o.date>=e).sort((o,s)=>o.date.getTime()-s.date.getTime())}function vt(t,i,n){const e=xt(t),o={text:(i==null?void 0:i.text)||"Текст",video:(i==null?void 0:i.video)||"Видео",test:(i==null?void 0:i.test)||"Тест",blank:(i==null?void 0:i.blank)||"Пропуски",matching:(i==null?void 0:i.matching)||"Сопоставление",stat_modules:(i==null?void 0:i.stat_modules)||"Модули",stat_lessons:(i==null?void 0:i.stat_lessons)||"Уроки",stat_steps:(i==null?void 0:i.stat_steps)||"Шаги"},s=e.activityData.map(g=>({date:new Date(`${g.date}T00:00`),join:g.join,leave:g.leave})).filter(g=>!Number.isNaN(g.date.getTime())),r=document.getElementById("activityChart"),l=document.getElementById("stepPie"),u=document.getElementById("structureBar"),b=g=>{if(!r)return;const d=It(s,g);dt(r,d.map(f=>Mt(f.date.toISOString().slice(0,10))),[{identifier:"joined",label:"Записались",values:d.map(f=>f.join),color:n.lineJoin},{identifier:"left",label:"Вышли",values:d.map(f=>f.leave),color:n.lineLeave}],n,{enableLegend:!0})};b("7"),document.querySelectorAll(".period-selector .chip").forEach(g=>{const d=g;d.onclick=()=>{document.querySelectorAll(".period-selector .chip").forEach(f=>f.classList.remove("active")),d.classList.add("active"),b(d.dataset.period||"7")}}),l&&it(l,[e.stepTypeData.text,e.stepTypeData.video,e.stepTypeData.test,e.stepTypeData.blank,e.stepTypeData.matching],n.palette.slice(0,5),n,.55,[o.text,o.video,o.test,o.blank,o.matching],{valueLabel:"Количество",shareLabel:"Доля",enableLegend:!0}),u&&bt(u,[o.stat_modules,o.stat_lessons,o.stat_steps],[e.structure.modules,e.structure.lessons,e.structure.steps],n,{valueLabel:"Количество",enableLegend:!0})}const N=new WeakMap;function E(t){const i=N.get(t);if(!i)return;const n=R(t,280);if(!n)return;const{context:e,width:o,height:s}=n;Y(e,o,s,i.theme.panelBackground);const r=Math.max(i.labels.length,3),l=Math.max(...i.values,1),u=o/2,b=s/2,g=Math.min(o,s)*.32;e.strokeStyle=i.theme.grid,e.lineWidth=1;for(let d=1;d<=4;d+=1){const f=g/4*d;e.beginPath();for(let a=0;a<r;a+=1){const x=-Math.PI/2+Math.PI*2*a/r,m=u+Math.cos(x)*f,p=b+Math.sin(x)*f;a===0?e.moveTo(m,p):e.lineTo(m,p)}e.closePath(),e.stroke()}e.beginPath(),i.values.forEach((d,f)=>{const a=-Math.PI/2+Math.PI*2*f/i.values.length,x=Math.max(0,d)/l*g*i.progress,m=u+Math.cos(a)*x,p=b+Math.sin(a)*x;f===0?e.moveTo(m,p):e.lineTo(m,p)}),e.closePath(),e.fillStyle=$(i.colors[0]||i.theme.lineJoin,.2),e.strokeStyle=i.colors[0]||i.theme.lineJoin,e.lineWidth=2,e.fill(),e.stroke(),i.points=[],i.values.forEach((d,f)=>{const a=-Math.PI/2+Math.PI*2*f/i.values.length,x=Math.max(0,d)/l*g*i.progress,m=u+Math.cos(a)*x,p=b+Math.sin(a)*x,c=i.colors[f%i.colors.length]||i.theme.lineJoin,y=i.hoverIndex===f;e.beginPath(),e.arc(m,p,y?6.5:5,0,Math.PI*2),e.fillStyle=c,e.fill(),y&&(e.beginPath(),e.arc(m,p,10,0,Math.PI*2),e.strokeStyle=$(c,.4),e.lineWidth=1.5,e.stroke()),i.points.push({x:m,y:p,label:i.labels[f]||`Item ${f+1}`,value:d,color:c})})}function Lt(t,i,n){const e=N.get(t);if(!e)return null;let o=null,s=Number.POSITIVE_INFINITY;return e.points.forEach((r,l)=>{const u=i-r.x,b=n-r.y,g=Math.sqrt(u*u+b*b);g<=12&&g<s&&(s=g,o=l)}),o}function Pt(t){const i=N.get(t);!i||i.initialized||(i.initialized=!0,t.addEventListener("mousemove",n=>{const e=N.get(t);if(!e)return;const o=t.getBoundingClientRect(),s=n.clientX-o.left,r=n.clientY-o.top,l=Lt(t,s,r);if(e.hoverIndex=l,E(t),l===null){t.style.cursor="default",L(t);return}const u=e.points[l];t.style.cursor="pointer",U(t,s+12,r-10,q(u.label,[{label:e.valueLabel,value:u.value,accentColor:u.color}]))}),t.addEventListener("mouseleave",()=>{const n=N.get(t);n&&(n.hoverIndex=null,E(t),t.style.cursor="default",L(t))}))}function Ct(t,i,n,e,o,s){const r=N.get(t),l={labels:i,values:n,colors:e,theme:o,progress:0,hoverIndex:(r==null?void 0:r.hoverIndex)??null,initialized:(r==null?void 0:r.initialized)??!1,points:[],valueLabel:s==null?void 0:s.valueLabel};N.set(t,l),Pt(t),T({animationKey:`radar:${t.id}`,durationMs:760,onUpdate(u){const b=N.get(t);b&&(b.progress=u,E(t))}})}function _t(t){return{countPasses:Number(t==null?void 0:t.countPasses)||0,countCorrectPasses:Number(t==null?void 0:t.countCorrectPasses)||0,answers:Array.isArray(t==null?void 0:t.answers)?t.answers.map(i=>({answer:typeof i.answer=="string"?i.answer:"Без названия",voteCount:Number(i.voteCount)||Number(i.vote_count)||0})):[]}}function kt(t,i,n){const e=_t(i),o=t.querySelector("#successRatioChart"),s=t.querySelector("#answersRadarChart"),r=e.countPasses,l=e.countCorrectPasses,u=Math.max(0,r-l);if(o){const b=r===0?[1]:[l,u],g=r===0?["#d0dae8"]:[n.success,n.danger];it(o,b,g,n,.58,r===0?["Нет данных"]:["Успешно","Неуспешно"],{valueLabel:"Количество",shareLabel:"Процент",enableLegend:!0})}if(s){const b=e.answers.length>0,g=b?e.answers.map(a=>a.answer):["Нет данных"],d=b?e.answers.map(a=>a.voteCount):[1],f=b?e.answers.map((a,x)=>n.palette[x%n.palette.length]):["#c7d6ea"];Ct(s,g,d,f,n,{valueLabel:"Голоса"})}}function ot(){var i;const t=window;return{courseStats:t.courseStats,statData:t.statData,translations:(i=t.translations)==null?void 0:i.course}}function w(){const t=et(),{courseStats:i,translations:n}=ot();vt(i,n,t)}function tt(t){const i=et(),{statData:n}=ot();kt(t,n,i)}const st={initStatistic:w,statisticTest:tt};return typeof window<"u"&&(window.WebHackerStatistics=st,window.initStatistic=w,window.statisticTest=tt),V.initStatistic=w,V.statisticTest=tt,V.widgetApi=st,Object.defineProperty(V,Symbol.toStringTag,{value:"Module"}),V})({});
